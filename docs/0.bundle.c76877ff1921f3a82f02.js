(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{76:function(e,t,a){"use strict";a.r(t),t.default=a.p+"7a2dcae25524daba0f2f1485ce5c07e3.jpg"},80:function(e,t,a){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var n=r(a(5)),c=a(82),i=a(98),u=a(71),s=a(86),m=a(87),o=l(a(76));console.log(a(76)),a(88);var d=a(97);function f(){var e=n.useState("asd"),t=e[0],a=e[1],r=i.useObservable((function(e){return e.pipe(i.pluckFirst,u.filter((function(e){return e.length>=3})),u.debounceTime(300),u.switchMap((function(e){return s.searchPlayer(e)})),u.map((function(e){return e.items})))}),[t]),l=i.useObservableState(r,[]);return n.default.createElement("div",{className:"search-form"},n.default.createElement("input",{type:"text",value:t,onChange:function(e){return a(e.currentTarget.value)}}),n.default.createElement("ul",{className:"search-results"},l.map((function(e){return n.default.createElement(h,{result:e,key:e.player_id})}))))}function h(e){var t=e.result;return n.default.createElement("li",{className:"search-result"},n.default.createElement(d.Link,{to:"/player/"+t.player_id},n.default.createElement("img",{className:"avatar",src:""===t.avatar?o.default:t.avatar}),n.default.createElement("span",{className:"nickname"},t.nickname)))}function p(){var e,t,a=d.useParams().playerId,r=i.useObservable((function(e){return e.pipe(i.pluckFirst,u.switchMap((function(e){return s.getPlayer(e)})))}),[a]),l=n.useState(!1),c=l[0],m=l[1],f=i.useObservableState(r,void 0);return f&&a===f.player_id?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"player"},n.default.createElement("img",{className:"player-avatar",src:""===f.avatar?o.default:f.avatar}),n.default.createElement("div",{className:"player-info"},n.default.createElement("h2",null,f.nickname," (",f.country,")"),n.default.createElement("ul",null,n.default.createElement("li",null,n.default.createElement("a",{href:"https://www.faceit.com/en/players/"+f.nickname},"FACEIT profile")),f.steam_id_64&&n.default.createElement("li",null,n.default.createElement("a",{href:"https://steamcommunity.com/profiles/"+f.steam_id_64},"Steam profile")),(null===(t=null===(e=f.games)||void 0===e?void 0:e.csgo)||void 0===t?void 0:t.faceit_elo)&&n.default.createElement("li",null,"CS:GO elo ",f.games.csgo.faceit_elo)))),n.default.createElement("div",null,n.default.createElement("button",{onClick:function(){return m(!c)}},"Show JSON"),c&&n.default.createElement(b,{name:"player",value:f})),n.default.createElement(g,{playerId:f.player_id})):n.default.createElement("p",null,"Loading...")}function g(e){var t=e.playerId,a=i.useObservable((function(e){return e.pipe(i.pluckFirst,u.switchMap((function(e){return s.getMatchHistory(e,"csgo")})),u.map((function(e){return e.items})))}),[t]),r=i.useObservableState(a,[]);return n.default.createElement("div",{className:"match-history"},n.default.createElement("h2",null,"Match history"),r.map((function(e){return n.default.createElement(v,{key:e.match_id,playerId:t,matchId:e.match_id})})))}function v(e){var t=e.playerId,a=e.matchId,r=i.useObservable((function(e){return e.pipe(i.pluckFirst,u.switchMap((function(e){return s.getMatch(e)})))}),[a]),l=i.useObservableState(r,void 0);return l&&a===l.match_id?n.default.createElement("div",{className:"match"},2===l.version&&n.default.createElement(y,{match:l,playerId:t}),1===l.version&&n.default.createElement(E,{match:l,playerId:t})):n.default.createElement("p",null,"Loading...")}function E(e){e.match,e.playerId;return n.default.createElement("p",null,"TODO")}function y(e){var t,a=e.match,r=e.playerId,l=function(e,t){return e.roster.find((function(e){return e.player_id===t}))},c=function(e){var t=e.team;return n.default.createElement("span",{className:l(t,r)?"home-team":"enemy-team"},t.name)},i=n.useState(!1),u=i[0],s=i[1],o=a.teams[a.results.winner],d=l(o,r)?n.default.createElement("span",{className:"win"},"WIN"):n.default.createElement("span",{className:"loss"},"LOSS");return n.default.createElement("div",null,n.default.createElement("div",{className:"match-header",onClick:function(){return s(!u)}},n.default.createElement("div",{className:"result"},n.default.createElement("p",null,d)),n.default.createElement("div",{className:"match-name"},n.default.createElement("p",null,n.default.createElement(c,{team:a.teams.faction1})," vs ",n.default.createElement(c,{team:a.teams.faction2}))),n.default.createElement("div",{className:"timestamp"},n.default.createElement("p",null,(t=a.started_at,m.DateTime.fromSeconds(t).toRelative()))),n.default.createElement("div",{className:"toggle"},n.default.createElement("p",null,u?n.default.createElement("i",{className:"fas fa-chevron-down"}):n.default.createElement("i",{className:"fas fa-chevron-right"})))),u&&n.default.createElement(x,{match:a}))}function x(e){var t=e.match,a=function(e){return n.default.createElement("div",{className:"team"},n.default.createElement("img",{className:"avatar",src:""===e.avatar?o.default:e.avatar}),n.default.createElement("div",{className:"players"},n.default.createElement("h2",null,e.name),n.default.createElement("ul",null,e.roster.map((function(e){return n.default.createElement("li",{key:e.player_id},e.nickname)})))))},r=n.useState(!1),l=r[0],c=r[1];return n.default.createElement("div",{className:"match-details"},n.default.createElement("div",{className:"teams"},a(t.teams.faction1),a(t.teams.faction2)),n.default.createElement("button",{onClick:function(){return c(!l)}},"Show JSON"),l&&n.default.createElement(b,{name:"match",value:t}))}function b(e){var t=e.name,a=e.value;return n.default.createElement("pre",null,t," === ",JSON.stringify(a,null,2))}c.render(n.default.createElement((function(){var e=n.useState(void 0);return e[0],e[1],n.default.createElement(d.HashRouter,null,n.default.createElement(f,null),n.default.createElement("div",{className:"main-content"},n.default.createElement(d.Route,{path:"/player/:playerId"},n.default.createElement(p,null))))}),null),document.getElementById("app"))},86:function(e,t,a){"use strict";t.__esModule=!0;var r=a(54),l=a(71);function n(e,t,a){var l=a?"https://open.faceit.com/data/v4"+t+"?"+function(e){var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var a=e[0],r=e[1];return t.append(a,r)})),t.toString()}(a):"https://open.faceit.com/data/v4"+t;return new r.Observable((function(a){var r=new AbortController,n=!1;return fetch(l,{method:e,headers:{Authorization:"Bearer 82592226-3fb7-41cf-941c-7098de7d84c7"},signal:r.signal}).then((function(e){n=!0,a.next(e),a.complete()})).catch((function(e){a.error(e),a.complete()})),function(){n||(console.log("Cancelling request in progress: "+t),r.abort())}}))}t.searchPlayer=function(e){return n("GET","/search/players",{nickname:e,limit:"10",game:"csgo"}).pipe(l.flatMap((function(e){return r.from(e.json())})))},t.getPlayer=function(e){return n("GET","/players/"+e).pipe(l.flatMap((function(e){return r.from(e.json())})))},t.getMatchHistory=function(e,t){return n("GET","/players/"+e+"/history",{game:t}).pipe(l.flatMap((function(e){return r.from(e.json())})))},t.getMatch=function(e){return n("GET","/matches/"+e).pipe(l.flatMap((function(e){return r.from(e.json())})))},t.getMatchStats=function(e){return n("GET","/matches/"+e+"/stats").pipe(l.flatMap((function(e){return r.from(e.json())})))}},88:function(e,t,a){var r=a(89),l=a(90);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var n={insert:"head",singleton:!1},c=(r(l,n),l.locals?l.locals:{});e.exports=c},90:function(e,t,a){(t=a(91)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);"]),t.push([e.i,"body{font-family:'Source Sans Pro', sans-serif;color:#333;background-color:#f7f7f7}.search-form{position:fixed;top:0;left:0;overflow:none;height:100%;width:300px;display:flex;flex-direction:column}.search-form input{min-height:12px;height:12px;padding:10px}.search-form .search-results{flex-grow:1;overflow-y:scroll}.search-form .search-results .search-result a{display:flex;height:32px}.search-form .search-results .search-result a .nickname{flex-grow:1;vertical-align:middle;line-height:32px}.search-form .search-results .search-result{border-bottom:1px dashed #ddd;box-sizing:border-box}.search-form .search-results .search-result .avatar{width:32px;height:32px;margin-right:10px}.search-form ul{margin:0;padding:0}.search-form li{list-style-type:none}.search-form li.selected{background-color:#eee}.main-content{margin-left:300px}.player{display:flex;flex-direction:row}.player .player-avatar{width:170px;height:170px}.player .player-info{flex-grow:1;padding-left:20px}.match{margin:10px 0;padding:5px 0}.match .match-header{display:flex;flex-direction:row}.match .match-header .result{width:100px}.match .match-header .match-name{flex-grow:1;padding-left:20px}.match .match-header .timestamp{width:150px;padding:0 20px}.match .match-header .toggle{width:16px;padding:0 20px}.match .match-details .teams{display:flex;flex-direction:row}.match .match-details .teams .team{flex-grow:1;display:flex;flex-direction:row}.match .match-details .teams .team .avatar{width:240px;height:240px}.match .match-details .teams .team .players{flex-grow:1;padding-left:20px}.match{border:1px solid #eee;background:white;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2)}.match .match-header .result{text-align:center}.match .match-header .result .win{color:green}.match .match-header .result .loss{color:red}.match .match-header .match-name{border-left:1px solid lightgray;border-right:1px solid lightgray}.match .match-header .match-name .home-team{text-decoration:underline}.match .match-header .timestamp{text-align:center}.match .match-header .toggle{text-align:center;border-left:1px solid lightgray}.match .match-details{padding:20px;border-top:1px solid lightgray}\n",""]),e.exports=t}},[[80,1,2]]]);
//# sourceMappingURL=0.bundle.c76877ff1921f3a82f02.js.map