{"version":3,"sources":["webpack:///./src/style.scss?f8f3","webpack:///./src/style.scss","webpack:///./src/Faceit.js","webpack:///./src/App.jsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","Kefir","require","FaceitClient","apiKey","_classCallCheck","this","base","authHeaders","Authorization","concat","key","value","nickname","callApi","limit","game","playerId","method","path","params","url","mkQueryString","fromPromise","fetch","headers","then","_","json","paramObject","searchParams","URLSearchParams","Object","entries","forEach","_ref","_ref2","_slicedToArray","append","String","toString","React","render","Atom","R","U","client","Search","selection","nameInput","selectedIndex","searchResults","filter","lengthAtLeast","debounce","flatMapLatest","name","searchPlayer","map","prop","toProperty","onValue","set","combine","idx","results","bus","hasResults","complement","isEmpty","keyDowns","upsAndDowns","e","includes","mod","dec","inc","min","max","length","func","modify","createElement","className","onKeyDown","persist","tabIndex","type","onChange","getProps","ifElse","mapElems","x","selected","equals","onClick","cns","when","view","PlayerDetails","player","getPlayer","loading","s","p","player_id","src","stringify","n","compose","lte","selectedPlayer","Fragment","document","getElementById"],"mappings":"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","file":"0.bundle.ce37dcaea735e6327ade.js","sourcesContent":["\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);\", \"\"]);\n\n// Module\nexports.push([module.id, \"body {\\n  font-family: 'Source Sans Pro', sans-serif;\\n  color: #333;\\n  background-color: #f7f7f7; }\\n\\n.search-form {\\n  height: 100%;\\n  width: 200px;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  overflow-y: scroll; }\\n  .search-form li {\\n    list-style-type: none; }\\n    .search-form li.selected {\\n      background-color: #eee; }\\n\\n.main-content {\\n  margin-left: 200px; }\\n\\n.player-details .player-avatar {\\n  width: 170px;\\n  height: 170px; }\\n\", \"\"]);\n\n","const Kefir = require(\"kefir\")\n\nmodule.exports = class FaceitClient {\n  constructor(apiKey) {\n    this.base = \"https://open.faceit.com/data/v4\"\n    this.apiKey = apiKey\n    this.authHeaders = {\"Authorization\": `Bearer ${this.apiKey}`}\n  }\n\n  searchPlayer(nickname) {\n    return this.callApi(\"GET\", \"/search/players\", {\n      nickname,\n      limit: 25,\n      game: \"csgo\",\n    })\n  }\n\n  getPlayer(playerId) {\n    return this.callApi(\"GET\", `/players/${playerId}`)\n  }\n\n  callApi(method, path, params) {\n    const url = `${this.base}${path}?${this.mkQueryString(params)}`\n    return Kefir.fromPromise(\n      fetch(url, {\n        method,\n        headers: this.authHeaders,\n      }).then(_ => _.json())\n    )\n  }\n\n  mkQueryString(paramObject) {\n    if (!paramObject) return \"\"\n\n    const searchParams = new URLSearchParams()\n    Object.entries(paramObject).forEach(([key, value]) =>\n      searchParams.append(key, String(value)))\n    return searchParams.toString()\n  }\n}\n","const React = require(\"karet\")\nconst {render} = require(\"react-dom\")\nconst {Atom} = require(\"kefir.atom\")\nconst R = require(\"ramda\")\nconst Kefir = require(\"kefir\")\nconst U = require(\"karet.util\")\n\nrequire(\"./style.scss\")\n\nconst FaceitClient = require(\"./Faceit.js\")\n\nconst API_KEY = \"82592226-3fb7-41cf-941c-7098de7d84c7\"\nconst client = new FaceitClient(API_KEY)\n\nconst App = () => {\n  const selectedPlayer = new Atom(\"\")\n\n  return (\n    <React.Fragment>\n      <Search selection={selectedPlayer} />\n      <div className=\"main-content\">\n        {U.ifElse(selectedPlayer,\n          <PlayerDetails selection={selectedPlayer} />,\n          <p>Select a player from search results</p>)}\n      </div>\n    </React.Fragment>\n  )\n}\nconst Search = ({selection}) => {\n  const nameInput = new Atom(\"\")\n  const selectedIndex = new Atom(0)\n\n  const searchResults = nameInput\n    .filter(lengthAtLeast(3))\n    .debounce(250)\n    .flatMapLatest(name => client.searchPlayer(name))\n    .map(R.prop(\"items\"))\n    .toProperty(() => [])\n\n  // Select first result automatically\n  searchResults.onValue(() => selectedIndex.set(0))\n\n  Kefir.combine(\n    [selectedIndex, searchResults],\n    (idx, results) => R.path([idx, \"player_id\"], results)\n  ).onValue(playerId => selection.set(playerId))\n\n  const hasResults = searchResults.map(R.complement(R.isEmpty))\n\n  const eventsToBus = bus => e => {\n    e.persist()\n    bus.push(e)\n  }\n  const keyDowns = U.bus()\n  const upsAndDowns = keyDowns.filter(e => [\"ArrowDown\", \"ArrowUp\"].includes(e.key))\n  Kefir.combine([upsAndDowns, searchResults], (e, results) => {\n    const mod = e.key === \"ArrowUp\" ? R.dec : R.inc\n    return idx => R.min(R.max(0, mod(idx)), results.length - 1)\n  }).onValue(func => selectedIndex.modify(func))\n\n  return <div className=\"search-form\" onKeyDown={eventsToBus(keyDowns)} tabIndex=\"0\">\n    <input\n      type=\"text\"\n      value={nameInput}\n      onChange={U.getProps({value: nameInput})} />\n\n    {U.ifElse(hasResults,\n      <ul>\n        {U.mapElems((x, idx) => {\n          const selected = selectedIndex.map(R.equals(idx))\n          return (\n            <li key={idx} onClick={() => selectedIndex.set(idx)} className={U.cns(U.when(selected, \"selected\"))}>\n              {U.view(\"nickname\", x)}\n            </li>\n          )\n        }, searchResults)}\n      </ul>,\n      <p>No results</p>)}\n  </div>\n}\n\nconst PlayerDetails = ({selection}) => {\n  const player = selection\n    .flatMapLatest(playerId => client.getPlayer(playerId))\n    .toProperty(() => undefined)\n\n  const loading = Kefir.combine([selection, player], (s, p) => {\n    return !p || (p.player_id !== s)\n  })\n\n  return <div className=\"player-details\">\n    {U.ifElse(loading,\n      <p>Loading...</p>,\n      <div>\n        <h2>{U.view(\"nickname\", player)} ({U.view(\"country\", player)})</h2>\n        <img className=\"player-avatar\" src={U.view(\"avatar\", player)} />\n        <table>\n          <tbody>\n            <tr><td>Player ID</td><td>{U.view(\"player_id\", player)}</td></tr>\n            <tr><td>Country</td><td>{U.view(\"country\", player)}</td></tr>\n            {U.when(player.map(R.path([\"platforms\", \"steam\"])),\n              <tr><td>Steam ID</td><td>{U.view([\"platforms\", \"steam\"], player)}</td></tr>)}\n            {U.when(player.map(R.path([\"games\", \"csgo\", \"faceit_elo\"])),\n              <tr><td>CSGO elo</td><td>{U.view([\"games\", \"csgo\", \"faceit_elo\"], player)}</td></tr>)}\n          </tbody>\n        </table>\n        <div>\n          <h3>Raw</h3>\n          <pre>{U.stringify(player, null, 2)}</pre>\n        </div>\n      </div>,\n    )}\n  </div>\n}\n\nconst lengthAtLeast = n => R.compose(R.lte(n), R.length)\n\nrender(<App />, document.getElementById(\"app\"))\n"],"sourceRoot":""}