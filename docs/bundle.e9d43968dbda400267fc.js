(self.webpackChunk=self.webpackChunk||[]).push([[179],{7192:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(4015),r=a.n(n),l=a(3645),i=a.n(l)()(r());i.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);"]),i.push([e.id,"body{font-family:'Source Sans Pro', sans-serif;color:#333;background-color:#f7f7f7}.search-form{position:fixed;top:0;left:0;overflow:none;height:100%;width:300px;display:flex;flex-direction:column}.search-form input{min-height:12px;height:12px;padding:10px}.search-form .search-results{flex-grow:1;overflow-y:scroll}.search-form .search-results .search-result a{display:flex;height:32px}.search-form .search-results .search-result a .nickname{flex-grow:1;vertical-align:middle;line-height:32px}.search-form .search-results .search-result{border-bottom:1px dashed #ddd;box-sizing:border-box}.search-form .search-results .search-result .avatar{width:32px;height:32px;margin-right:10px}.search-form ul{margin:0;padding:0}.search-form li{list-style-type:none}.search-form li.selected{background-color:#eee}.main-content{margin-left:300px}.player{display:flex;flex-direction:row}.player .player-avatar{width:170px;height:170px}.player .player-info{flex-grow:1;padding-left:20px}.match{margin:10px 0;padding:5px 0}.match .match-header{display:flex;flex-direction:row}.match .match-header .result{width:100px}.match .match-header .match-name{flex-grow:1;padding-left:20px}.match .match-header .timestamp{width:150px;padding:0 20px}.match .match-header .toggle{width:16px;padding:0 20px}.match .match-details .teams{display:flex;flex-direction:row}.match .match-details .teams .team{flex-grow:1;display:flex;flex-direction:row}.match .match-details .teams .team .avatar{width:240px;height:240px}.match .match-details .teams .team .players{flex-grow:1;padding-left:20px}.match{border:1px solid #eee;background:white;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2)}.match .match-header .result{text-align:center}.match .match-header .result .win{color:green}.match .match-header .result .loss{color:red}.match .match-header .match-name{border-left:1px solid lightgray;border-right:1px solid lightgray}.match .match-header .match-name .home-team{text-decoration:underline}.match .match-header .timestamp{text-align:center}.match .match-header .toggle{text-align:center;border-left:1px solid lightgray}.match .match-details{padding:20px;border-top:1px solid lightgray}\n","",{version:3,sources:["webpack://./src/style.scss"],names:[],mappings:"AAWA,KACE,yCAA0C,CAC1C,UAXc,CAYd,wBAXuB,CAYxB,aAIC,cAAe,CACf,KAAM,CAAE,MAAO,CACf,aAAc,CAGd,WAAY,CACZ,WAjBkB,CAqBlB,YAAa,CACb,qBAAsB,CAbxB,mBAgBI,eAA8C,CAC9C,WAA0C,CAC1C,YAHc,CAflB,6BAsBI,WAAY,CACZ,iBAAkB,CAvBtB,8CA6BI,YAAa,CACb,WAtCmB,CAQvB,wDAgCM,WAAY,CACZ,qBAAsB,CACtB,gBA1CiB,CAQvB,4CAyCM,6BAA8B,CAC9B,qBAAsB,CA1C5B,oDA6CQ,UArDe,CAsDf,WAtDe,CAuDf,iBAAkB,CA/C1B,gBAqDI,QAAS,CACT,SAAU,CAtDd,gBA0DI,oBAAqB,CA1DzB,yBA4DM,qBAzEa,CA0Ed,cAKH,iBA3EkB,CA4EnB,QAGC,YAAa,CACb,kBAAmB,CAFrB,uBAII,WAAY,CACZ,YAAa,CALjB,qBAQI,WAAY,CACZ,iBAzFiB,CA0FlB,OAKD,aAA+B,CAC/B,aAAgC,CAFlC,qBAII,YAAa,CACb,kBAAmB,CALvB,6BAQM,WAAY,CARlB,iCAWM,WAAY,CACZ,iBA1Ge,CA8FrB,gCAeM,WAAY,CACZ,cA9Ge,CA8FrB,6BAmBM,UAAW,CACX,cAlHe,CA8FrB,6BA0BM,YAAa,CACb,kBAAmB,CA3BzB,mCA6BQ,WAAY,CAEZ,YAAa,CACb,kBAAmB,CAhC3B,2CAkCU,WAAY,CACZ,YAAa,CAnCvB,4CAuCU,WAAY,CACZ,iBAtIW,CAuIZ,OAQP,qBAAsB,CACtB,gBAAiB,CACjB,2CAA+C,CAHjD,6BAOM,iBAAkB,CAPxB,kCAQa,WAAa,CAR1B,mCASc,SAAW,CATzB,iCAaM,+BAAgC,CAChC,gCAAiC,CAdvC,4CAiBQ,yBAA0B,CAjBlC,gCAwBM,iBAAkB,CAxBxB,6BA4BM,iBAAkB,CAClB,+BAAgC,CA7BtC,sBAkCI,YAhLiB,CAiLjB,8BAA+B",sourcesContent:["@import url('https://fonts.googleapis.com/css?family=Source+Sans+Pro');\n\n$fontColor: #333;\n$backgroundColor: #f7f7f7;\n$hilightColor: #eee;\n\n$defaultPadding: 20px;\n\n$sidebarWidth: 300px;\n$searchItemHeight: 32px;\n\nbody {\n  font-family: 'Source Sans Pro', sans-serif;\n  color: $fontColor;\n  background-color: $backgroundColor;\n}\n\n.search-form {\n  // Search bar hsa fixed position\n  position: fixed;\n  top: 0; left: 0;\n  overflow: none;\n\n  // Search form is always full screen height\n  height: 100%;\n  width: $sidebarWidth;\n\n  // Search input is at the top and results\n  // fill the rest with scroll bar\n  display: flex;\n  flex-direction: column;\n  input {\n    $padding: 10px;\n    min-height: $searchItemHeight - (2 * $padding);\n    height: $searchItemHeight - (2 * $padding);\n    padding: $padding;\n  }\n\n  .search-results {\n    flex-grow: 1;\n    overflow-y: scroll;\n  }\n\n  // Vertically align text in search results by setting layout\n  // with flex and setting proper line-height\n  .search-results .search-result a {\n    display: flex;\n    height: $searchItemHeight;\n    .nickname {\n      flex-grow: 1;\n      vertical-align: middle;\n      line-height: $searchItemHeight;\n    }\n  }\n\n  .search-results {\n    .search-result {\n      // Fancy separator lines\n      border-bottom: 1px dashed #ddd;\n      box-sizing: border-box;\n\n      .avatar {\n        width: $searchItemHeight;\n        height: $searchItemHeight;\n        margin-right: 10px;\n      }\n    }\n  }\n\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n\n  li {\n    list-style-type: none;\n    &.selected {\n      background-color: $hilightColor;\n    }\n  }\n}\n\n.main-content {\n  margin-left: $sidebarWidth;\n}\n\n.player {\n  display: flex;\n  flex-direction: row;\n  .player-avatar {\n    width: 170px;\n    height: 170px;\n  }\n  .player-info {\n    flex-grow: 1;\n    padding-left: $defaultPadding;\n  }\n}\n\n// Match component layout\n.match {\n  margin: ($defaultPadding / 2) 0;\n  padding: ($defaultPadding / 4) 0;\n  .match-header {\n    display: flex;\n    flex-direction: row;\n\n    .result {\n      width: 100px;\n    }\n    .match-name {\n      flex-grow: 1;\n      padding-left: $defaultPadding;\n    }\n    .timestamp {\n      width: 150px;\n      padding: 0 $defaultPadding;\n    }\n    .toggle {\n      width: 16px;\n      padding: 0 $defaultPadding;\n    }\n  }\n\n  .match-details {\n    .teams {\n      display: flex;\n      flex-direction: row;\n      .team {\n        flex-grow: 1;\n\n        display: flex;\n        flex-direction: row;\n        .avatar {\n          width: 240px;\n          height: 240px;\n        }\n\n        .players {\n          flex-grow: 1;\n          padding-left: $defaultPadding;\n        }\n      }\n    }\n  }\n}\n\n// Match component styles\n.match {\n  border: 1px solid #eee;\n  background: white;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n\n  .match-header {\n    .result {\n      text-align: center;\n      .win { color: green }\n      .loss { color: red }\n    }\n\n    .match-name {\n      border-left: 1px solid lightgray;\n      border-right: 1px solid lightgray;\n\n      .home-team {\n        text-decoration: underline;\n      }\n      .enemy-team {\n      }\n    }\n\n    .timestamp {\n      text-align: center;\n    }\n\n    .toggle {\n      text-align: center;\n      border-left: 1px solid lightgray;\n    }\n  }\n\n  .match-details {\n    padding: $defaultPadding;\n    border-top: 1px solid lightgray;\n  }\n}\n"],sourceRoot:""}]);const c=i},9781:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a.p+"7a2dcae25524daba0f2f1485ce5c07e3.jpg"},4404:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(3379),r=a.n(n),l=a(7192);r()(l.Z,{insert:"head",singleton:!1});const i=l.Z.locals||{}},8957:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var c=l(a(7294)),s=a(3935),o=a(9490),u=a(3335),d=a(7501),m=a(6471),f=a(1821),h=i(a(9781)),p=a(1705),A=a(7764),g=a(2714);function C(){var e=c.useRef(null),t=c.useState(),a=t[0],n=t[1];c.useEffect((function(){var t=A.fromScrollEvents(e).subscribe((function(e){return n(e)}));return function(){return t.unsubscribe()}}),[e]);var r=c.useState(""),l=r[0],i=r[1],s=f.useObservable((function(e){return e.pipe(f.pluckFirst,m.filter((function(e){return e.length>=3})),m.debounceTime(300),g.tapLog("searchTerm"))}),[l]),o=f.useObservable((function(e){return e.pipe(f.pluckFirst,m.flatMap((function(e){return e?d.of(e):d.EMPTY})),m.filter((function(e){var t=e.scrollTop,a=e.scrollTopMax;return t>=Math.max(0,a-500)})))}),[a]),u=f.useObservable((function(e){return e.pipe(f.pluckFirst,m.flatMap(d.identity)).pipe(m.switchMap((function(e){var t=new d.BehaviorSubject(0),a=o.pipe(m.startWith());return d.zip(t,a).pipe(f.pluckFirst,g.tapLog("offset"),m.flatMap((function(t){return p.searchPlayer(e,t,100)})),m.tap((function(e){return 0===e.items.length?t.complete():t.next(e.end)})),g.tapLog("resultPages")).pipe(m.map((function(e){return e.items})),m.scan((function(e,t){return e.concat(t)}),[]),m.map(x))})))}),[s]),h=c.useState([]),C=h[0],v=h[1];return f.useSubscription(u,v),c.default.createElement("div",{className:"search-form"},c.default.createElement("input",{type:"text",onChange:function(e){i(e.currentTarget.value)}}),c.default.createElement("ul",{className:"search-results",ref:e},C.map((function(e){return c.default.createElement(B,{result:e,key:e.player_id})}))))}function x(e){var t=new Set,a=[];return e.forEach((function(e){t.has(e.player_id)||(t.add(e.player_id),a.push(e))})),a}function B(e){var t=e.result;return c.default.createElement("li",{className:"search-result"},c.default.createElement(u.Link,{to:"/player/"+t.player_id},c.default.createElement("img",{className:"avatar",src:""===t.avatar?h.default:t.avatar}),c.default.createElement("span",{className:"nickname"},t.nickname)))}function v(){var e,t,a=u.useParams().playerId,n=f.useObservable((function(e){return e.pipe(f.pluckFirst,m.switchMap((function(e){return p.getPlayer(e)})))}),[a]),r=c.useState(!1),l=r[0],i=r[1],s=f.useObservableState(n);return s&&s.player_id===a?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"player"},c.default.createElement("img",{className:"player-avatar",src:""===s.avatar?h.default:s.avatar}),c.default.createElement("div",{className:"player-info"},c.default.createElement("h2",null,s.nickname," (",s.country,")"),c.default.createElement("ul",null,c.default.createElement("li",null,c.default.createElement("a",{href:"https://www.faceit.com/en/players/"+s.nickname},"FACEIT profile")),s.steam_id_64&&c.default.createElement("li",null,c.default.createElement("a",{href:"https://steamcommunity.com/profiles/"+s.steam_id_64},"Steam profile")),(null===(t=null===(e=s.games)||void 0===e?void 0:e.csgo)||void 0===t?void 0:t.faceit_elo)&&c.default.createElement("li",null,"CS:GO elo ",s.games.csgo.faceit_elo)))),c.default.createElement("div",null,c.default.createElement("button",{onClick:function(){return i(!l)}},"Show JSON"),l&&c.default.createElement(g.DebugValue,{name:"player",value:s})),c.default.createElement(y,{playerId:s.player_id})):c.default.createElement("p",null,"Loading...")}function y(e){var t=e.playerId,a=f.useObservable((function(e){return e.pipe(f.pluckFirst,m.switchMap((function(e){return p.getMatchHistory(e,"csgo")})),m.map((function(e){return e.items})))}),[t]),n=f.useObservableState(a,[]);return c.default.createElement("div",{className:"match-history"},c.default.createElement("h2",null,"Match history"),n.map((function(e){return c.default.createElement(b,{key:e.match_id,playerId:t,matchId:e.match_id})})))}function b(e){var t=e.playerId,a=e.matchId,n=f.useObservable((function(e){return e.pipe(f.pluckFirst,m.switchMap((function(e){return p.getMatch(e)})))}),[a]),r=f.useObservableState(n);return r&&a===r.match_id?c.default.createElement("div",{className:"match"},2===r.version&&c.default.createElement(w,{match:r,playerId:t}),1===r.version&&c.default.createElement(E,{match:r,playerId:t})):c.default.createElement("p",null,"Loading...")}function E(e){return e.match,e.playerId,c.default.createElement("p",null,"TODO")}function w(e){var t,a=e.match,n=e.playerId,r=function(e,t){return e.roster.find((function(e){return e.player_id===t}))},l=function(e){var t=e.team;return c.default.createElement("span",{className:r(t,n)?"home-team":"enemy-team"},t.name)},i=c.useState(!1),s=i[0],u=i[1],d=a.teams[a.results.winner],m=r(d,n)?c.default.createElement("span",{className:"win"},"WIN"):c.default.createElement("span",{className:"loss"},"LOSS");return c.default.createElement("div",null,c.default.createElement("div",{className:"match-header",onClick:function(){return u(!s)}},c.default.createElement("div",{className:"result"},c.default.createElement("p",null,m)),c.default.createElement("div",{className:"match-name"},c.default.createElement("p",null,c.default.createElement(l,{team:a.teams.faction1})," vs ",c.default.createElement(l,{team:a.teams.faction2}))),c.default.createElement("div",{className:"timestamp"},c.default.createElement("p",null,(t=a.started_at,o.DateTime.fromSeconds(t).toRelative()))),c.default.createElement("div",{className:"toggle"},c.default.createElement("p",null,s?c.default.createElement("i",{className:"fas fa-chevron-down"}):c.default.createElement("i",{className:"fas fa-chevron-right"})))),s&&c.default.createElement(M,{match:a}))}function M(e){var t=e.match,a=function(e){return c.default.createElement("div",{className:"team"},c.default.createElement("img",{className:"avatar",src:""===e.avatar?h.default:e.avatar}),c.default.createElement("div",{className:"players"},c.default.createElement("h2",null,e.name),c.default.createElement("ul",null,e.roster.map((function(e){return c.default.createElement("li",{key:e.player_id},e.nickname)})))))},n=c.useState(!1),r=n[0],l=n[1];return c.default.createElement("div",{className:"match-details"},c.default.createElement("div",{className:"teams"},a(t.teams.faction1),a(t.teams.faction2)),c.default.createElement("button",{onClick:function(){return l(!r)}},"Show JSON"),r&&c.default.createElement(g.DebugValue,{name:"match",value:t}))}a(4404),s.render(c.default.createElement((function(){return c.default.createElement(u.HashRouter,null,c.default.createElement(C,null),c.default.createElement("div",{className:"main-content"},c.default.createElement(u.Route,{path:"/player/:playerId"},c.default.createElement(v,null))))}),null),document.getElementById("app"))},1705:(e,t,a)=>{"use strict";t.__esModule=!0,t.getMatchStats=t.getMatch=t.getMatchHistory=t.getPlayer=t.searchPlayer=void 0;var n=a(7501),r=a(6471);function l(e,t,a){var r=a?"https://open.faceit.com/data/v4"+t+"?"+function(e){var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var a=e[0],n=e[1];return t.append(a,n)})),t.toString()}(a):"https://open.faceit.com/data/v4"+t;return new n.Observable((function(a){var n=new AbortController,l=!1;return fetch(r,{method:e,headers:{Authorization:"Bearer 82592226-3fb7-41cf-941c-7098de7d84c7"},signal:n.signal}).then((function(e){l=!0,a.next(e),a.complete()})).catch((function(e){a.error(e),a.complete()})),function(){l||(console.log("Cancelling request in progress: "+t),n.abort())}}))}t.searchPlayer=function(e,t,a){return l("GET","/search/players",{nickname:e,game:"csgo",offset:String(t),limit:String(a)}).pipe(r.flatMap((function(e){return n.from(e.json())})))},t.getPlayer=function(e){return l("GET","/players/"+e).pipe(r.flatMap((function(e){return n.from(e.json())})))},t.getMatchHistory=function(e,t){return l("GET","/players/"+e+"/history",{game:t}).pipe(r.flatMap((function(e){return n.from(e.json())})))},t.getMatch=function(e){return l("GET","/matches/"+e).pipe(r.flatMap((function(e){return n.from(e.json())})))},t.getMatchStats=function(e){return l("GET","/matches/"+e+"/stats").pipe(r.flatMap((function(e){return n.from(e.json())})))}},7764:(e,t,a)=>{"use strict";t.__esModule=!0,t.fromScrollEvents=void 0;var n=a(7501),r=a(6471);function l(e,t){return JSON.stringify(e)===JSON.stringify(t)}t.fromScrollEvents=function(e){return n.merge((t=e.current,n.merge(n.fromEvent(t,"scroll"),n.fromEvent(window,"resize")).pipe(r.throttleTime(200),r.map((function(){return t})))),n.interval(1e3)).pipe(r.map((function(){return t=e.current,"undefined"==typeof window?{scrollTop:0,scrollTopMax:0}:{scrollTop:t.scrollTop,scrollTopMax:t.scrollHeight-t.clientHeight};var t})),r.distinctUntilChanged(l));var t}},2714:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.DebugValue=t.tapLog=void 0;var r=a(6471),l=n(a(7294));t.tapLog=function(e){return r.tap((function(t){return console.log(e+"$ ->",t)}))},t.DebugValue=function(e){var t=e.name,a=e.value;return l.default.createElement("pre",null,t," === ",JSON.stringify(a,null,2))}}},e=>{"use strict";e.O(0,[736],(()=>(8957,e(e.s=8957)))),e.O()}]);
//# sourceMappingURL=bundle.e9d43968dbda400267fc.js.map