(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=n(5),c=n(13).render,o=n(4).Atom,i=n(6),s=n(2),u=n(10);n(17);var m=n(9),f=n(23),p=function(e){var t=e.selection,n=new o(""),r=new o(0),a=n.filter(v(3)).debounce(250).flatMapLatest(function(e){return m.searchPlayer(e)}).toProperty(function(){return[]});a.onValue(function(){return r.set(0)}),s.combine([r,a],function(e,t){return i.path([e,"player_id"],t)}).onValue(function(e){return t.set(e)});var c=a.map(i.complement(i.isEmpty)),f=u.bus();s.combine([f,a],function(e,t){var n="ArrowUp"===e.key?i.dec:i.inc;return function(e){return i.min(i.max(0,n(e)),t.length-1)}}).onValue(function(e){return r.modify(e)});var p=new o;return p.onValue(function(e){return e.focus()}),l.createElement("div",{className:"search-form"},l.createElement("input",{ref:u.set(p),type:"text",value:n,onKeyDown:function(e){["ArrowDown","ArrowUp"].includes(e.key)&&(e.preventDefault(),e.persist(),f.push(e))},onChange:u.getProps({value:n})}),u.ifElse(c,l.createElement("ul",{className:"search-results",onMouseDown:function(e){e.preventDefault(),p.get().focus()}},u.mapElems(function(e,t){var n=r.map(i.equals(t)),a=new o;return n.filter(i.identity).onValue(function(){return d(a.get())}),l.createElement(h,{result:e,ref:u.set(a),key:t,onClick:function(){return r.set(t)},className:u.cns(u.when(n,"selected"))})},a)),l.createElement("p",null,"No results")))},h=l.forwardRef(function(e,t){var n=e.result,c=e.className,o=a(e,["result","className"]);return l.createElement("li",r({},o,{ref:t,className:u.cns("search-result",c)}),l.createElement("img",{className:"avatar",src:u.view("avatar",n)}),l.createElement("span",{className:"nickname"},u.view("nickname",n)))}),d=function(e){return e&&e.scrollIntoView({block:"nearest"})},y=function(e){var t=e.selection,n=t.debounce(500).flatMapLatest(function(e){return m.getPlayer(e)}).toProperty(function(){}),r=s.combine([t,n.map(i.prop("player_id"))],i.complement(i.equals));return l.createElement("div",{className:"player-details"},u.ifElse(r,l.createElement("p",null,"Loading..."),l.createElement("div",null,l.createElement("h2",null,u.view("nickname",n)," (",u.view("country",n),")"),l.createElement("img",{className:"player-avatar",src:u.view("avatar",n)}),l.createElement("table",null,l.createElement("tbody",null,l.createElement("tr",null,l.createElement("td",null,"Player ID"),l.createElement("td",null,u.view("player_id",n))),l.createElement("tr",null,l.createElement("td",null,"Country"),l.createElement("td",null,u.view("country",n))),u.when(n.map(i.path(["platforms","steam"])),l.createElement("tr",null,l.createElement("td",null,"Steam ID"),l.createElement("td",null,u.view(["platforms","steam"],n)))),u.when(n.map(i.path(["games","csgo","faceit_elo"])),l.createElement("tr",null,l.createElement("td",null,"CSGO elo"),l.createElement("td",null,u.view(["games","csgo","faceit_elo"],n)))))),l.createElement(f,{playerId:u.view("player_id",n)}))))},v=function(e){return i.compose(i.lte(e),i.length)};c(l.createElement(function(){var e=new o("");return l.createElement(l.Fragment,null,l.createElement(p,{selection:e}),l.createElement("div",{className:"main-content"},u.ifElse(e,l.createElement(y,{selection:e}),l.createElement("p",null,"Select a player from search results"))))},null),document.getElementById("app"))},17:function(e,t,n){var r=n(18);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(20)(r,a);r.locals&&(e.exports=r.locals)},18:function(e,t,n){(t=e.exports=n(19)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);",""]),t.push([e.i,"body {\n  font-family: 'Source Sans Pro', sans-serif;\n  color: #333;\n  background-color: #f7f7f7; }\n\n.search-form {\n  position: fixed;\n  top: 0;\n  left: 0;\n  overflow: none;\n  height: 100%;\n  width: 200px;\n  display: flex;\n  flex-direction: column; }\n  .search-form input {\n    min-height: 12px;\n    height: 12px;\n    padding: 10px; }\n  .search-form .search-results {\n    flex-grow: 1;\n    overflow-y: scroll; }\n  .search-form .search-results .search-result {\n    display: flex;\n    height: 32px; }\n    .search-form .search-results .search-result .nickname {\n      flex-grow: 1;\n      vertical-align: middle;\n      line-height: 32px; }\n  .search-form .search-results .search-result {\n    border-bottom: 1px dashed #ddd;\n    box-sizing: border-box; }\n    .search-form .search-results .search-result .avatar {\n      width: 32px;\n      height: 32px;\n      margin-right: 10px; }\n  .search-form ul {\n    margin: 0;\n    padding: 0; }\n  .search-form li {\n    list-style-type: none; }\n    .search-form li.selected {\n      background-color: #eee; }\n\n.match-history .match {\n  border: 1px solid #eee;\n  background: white;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  margin: 10px;\n  padding: 10px; }\n  .match-history .match .home-team {\n    font-weight: bold;\n    font-style: italic; }\n\n.match-history .win {\n  color: green; }\n\n.match-history .loss {\n  color: red; }\n\n.main-content {\n  margin-left: 200px; }\n\n.player-details .player-avatar {\n  width: 170px;\n  height: 170px; }\n",""])},23:function(e,t,n){var r=n(5),a=n(2),l=n(10),c=n(6),o=n(9),i=function(e){var t=e.playerId,n=e.matchId.flatMapLatest(function(e){return o.getMatch(e)}).toProperty(),i=l.view(["teams","faction1"],n),h=l.view(["teams","faction2"],n),d=l.when(n,a.combine([n],[t],function(e,t){return u(t,s(e))?r.createElement("span",{className:"win"},"WIN"):r.createElement("span",{className:"loss"},"LOSS")})),y=p(t);return r.createElement("div",{className:"match"},l.ifElse(c.isNil(n),r.createElement(f,null),r.createElement("div",null,r.createElement("p",null,r.createElement(y,{team:i})," vs ",r.createElement(y,{team:h})," (",l.view("competition_name",n),")"),r.createElement("p",null,d),r.createElement("p",null,l.view(["started_at",m],n)))))},s=function(e){return e.teams[e.results.winner]},u=function(e,t){return t.roster.map(c.prop("player_id")).includes(e)},m=function(e){return e.toRelative()},f=function(){return r.createElement("p",null,"Loading...")},p=function(e){return function(t){var n=t.team,o=t.className;return r.createElement("span",{className:l.cns(o,l.ifElse(function(t){return a.combine([t],[e],function(e,t){return e.roster.map(c.prop("player_id")).includes(t)})}(n),"home-team","enemy-team"))},l.view("name",n))}};e.exports=function(e){var t=e.playerId,n=t.flatMapLatest(function(e){return o.getHistory(e,"csgo")}).toProperty(function(){return[]});return r.createElement("div",{className:"match-history"},r.createElement("h2",null,"Match history"),l.mapElemsWithIds("match_id",function(e,n){return r.createElement(i,{key:n,playerId:t,matchId:l.view("match_id",e)})},n))}},9:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(2),c=n(6),o=n(22).DateTime,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base="https://open.faceit.com/data/v4",this.apiKey=t,this.authHeaders={Authorization:"Bearer ".concat(this.apiKey)}}var t,n,i;return t=e,(n=[{key:"searchPlayer",value:function(e){return this.callApi("GET","/search/players",{nickname:e,limit:"1000",game:"csgo"}).map(c.prop("items"))}},{key:"getPlayer",value:function(e){return this.callApi("GET","/players/".concat(e))}},{key:"getHistory",value:function(e,t){return this.callApi("GET","/players/".concat(e,"/history"),{game:t}).map(c.prop("items"))}},{key:"getMatch",value:function(e){return this.callApi("GET","/matches/".concat(e)).map(function(e){return c.mergeLeft({started_at:o.fromSeconds(e.started_at)},e)})}},{key:"getMatchStats",value:function(e){return this.callApi("GET","/matches/".concat(e,"/stats"))}},{key:"callApi",value:function(e,t,n){var r="".concat(this.base).concat(t,"?").concat(this.mkQueryString(n));return l.fromPromise(fetch(r,{method:e,headers:this.authHeaders}).then(function(e){return e.json()}))}},{key:"mkQueryString",value:function(e){if(!e)return"";var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var n=r(e,2),a=n[0],l=n[1];return t.append(a,String(l))}),t.toString()}}])&&a(t.prototype,n),i&&a(t,i),e}();e.exports=new i("82592226-3fb7-41cf-941c-7098de7d84c7")}},[[11,1,2]]]);
//# sourceMappingURL=0.bundle.fe3fc824e05ccfea425b.js.map