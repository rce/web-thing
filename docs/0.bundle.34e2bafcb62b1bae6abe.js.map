{"version":3,"sources":["webpack:///./src/Faceit.js","webpack:///./src/Common.jsx","webpack:///./src/App.jsx","webpack:///./src/style.scss?f8f3","webpack:///./src/style.scss","webpack:///./src/Router.jsx","webpack:///./src/PlayerDetails.jsx","webpack:///./src/MatchList.jsx","webpack:///./src/Search.jsx","webpack:///./src/Util.js"],"names":["Kefir","require","R","DateTime","FaceitClient","apiKey","_classCallCheck","this","base","authHeaders","Authorization","concat","nickname","callApi","limit","game","map","prop","playerId","matchId","m","mergeLeft","started_at","fromSeconds","method","path","params","_this","url","mkQueryString","stream","emitter","controller","AbortController","signal","requestDone","fetch","headers","then","_","json","result","emit","end","catch","err","error","console","log","abort","paramObject","searchParams","URLSearchParams","Object","entries","forEach","_ref","_ref2","_slicedToArray","key","value","append","String","toString","module","exports","React","Spinner","createElement","render","BrowserRouter","Route","navigate","PlayerDetails","Search","onSelect","p","player_id","className","hash","Component","document","getElementById","content","__webpack_require__","i","options","hmr","transform","insertInto","undefined","locals","push","Atom","pathToRegexp","RouterContext","createContext","getCurrentLocation","window","location","Location","onValue","onhashchange","set","onClick","href","view","children","Provider","_prepareRegex2","keys","prepareRegex","regex","paramNames","Consumer","Fragment","match","exec","paramMatches","tail","zipObj","Link","_ref3","props","_objectWithoutProperties","_extends","U","MatchList","player","getPlayer","toProperty","steamId","ifElse","isNil","src","when","string","_templateObject","Match","flatMapLatest","getMatch","team1","team2","winOrLoss","combine","hasPlayer","winner","TeamName","mkTeamName","team","formatTime","teams","results","roster","includes","date","toRelative","cns","isHomeTeam","matches","getHistory","mapElemsWithIds","id","isAwaiting","SearchResultPlayer","forwardRef","_ref6","ref","scrollVisible","element","scrollIntoView","block","lengthAtLeast","n","compose","lte","length","limitRange","min","max","pipe","isDefined","x","nameInput","selectedIndex","searchTerm","filter","debounce","skipDuplicates","searchResults","name","searchPlayer","loadingResults","idx","upsAndDowns","bus","_ref4","_ref5","e","items","mod","dec","inc","newIdx","inputRef","focus","type","onKeyDown","preventDefault","persist","onChange","getProps","onMouseDown","get","mapElems","selected","equals","identity","derivative","merge"],"mappings":"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","file":"0.bundle.34e2bafcb62b1bae6abe.js","sourcesContent":["const Kefir = require(\"kefir\")\r\nconst R = require(\"ramda\")\r\nconst {DateTime} = require(\"luxon\")\r\n\r\nconst API_KEY = \"82592226-3fb7-41cf-941c-7098de7d84c7\"\r\n\r\nclass FaceitClient {\r\n  constructor(apiKey) {\r\n    this.base = \"https://open.faceit.com/data/v4\"\r\n    this.apiKey = apiKey\r\n    this.authHeaders = {\"Authorization\": `Bearer ${this.apiKey}`}\r\n  }\r\n\r\n  searchPlayer(nickname) {\r\n    return this.callApi(\"GET\", \"/search/players\", {nickname, limit: \"1000\", game: \"csgo\"})\r\n      .map(R.prop(\"items\"))\r\n  }\r\n\r\n  getPlayer(playerId) {\r\n    return this.callApi(\"GET\", `/players/${playerId}`)\r\n  }\r\n\r\n  getHistory(playerId, game) {\r\n    return this.callApi(\"GET\", `/players/${playerId}/history`, {game})\r\n      .map(R.prop(\"items\"))\r\n  }\r\n\r\n  getMatch(matchId) {\r\n    return this.callApi(\"GET\", `/matches/${matchId}`)\r\n      .map(m => R.mergeLeft({\r\n        started_at: DateTime.fromSeconds(m.started_at),\r\n      }, m))\r\n  }\r\n\r\n  getMatchStats(matchId) {\r\n    return this.callApi(\"GET\", `/matches/${matchId}/stats`)\r\n  }\r\n\r\n  callApi(method, path, params) {\r\n    const url = `${this.base}${path}?${this.mkQueryString(params)}`\r\n    return Kefir.stream(emitter => {\r\n      const controller = new AbortController()\r\n      const signal = controller.signal\r\n      let requestDone = false\r\n\r\n      fetch(url, {method, headers: this.authHeaders, signal})\r\n        .then(_ => _.json())\r\n        .then(result => {\r\n          requestDone = true\r\n          emitter.emit(result)\r\n          emitter.end()\r\n        })\r\n        .catch(err => {\r\n          emitter.error(err)\r\n          emitter.end()\r\n        })\r\n\r\n      return () => {\r\n        if (!requestDone) {\r\n          console.log(`Cancelling request in progress: ${path}`)\r\n          controller.abort()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  mkQueryString(paramObject) {\r\n    if (!paramObject) return \"\"\r\n\r\n    const searchParams = new URLSearchParams()\r\n    Object.entries(paramObject).forEach(([key, value]) =>\r\n      searchParams.append(key, String(value)))\r\n    return searchParams.toString()\r\n  }\r\n}\r\n\r\nmodule.exports = new FaceitClient(API_KEY)\r\n","const React = require(\"karet\")\r\n\r\nconst Spinner = () => <p>Loading...</p>\r\n\r\nmodule.exports = {Spinner}\r\n","const React = require(\"karet\")\r\nconst {render} = require(\"react-dom\")\r\n\r\nrequire(\"./style.scss\")\r\n\r\nconst {BrowserRouter, Route, navigate} = require(\"./Router.jsx\")\r\nconst PlayerDetails = require(\"./PlayerDetails.jsx\")\r\nconst {Search} = require(\"./Search.jsx\")\r\n\r\nconst App = () => {\r\n  const onSelect = p => navigate(`#/player/${p.player_id}`)\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Search onSelect={onSelect} />\r\n      <div className=\"main-content\">\r\n        <Route hash=\"#/player/:playerId\" Component={PlayerDetails} />\r\n      </div>\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nrender(<App />, document.getElementById(\"app\"))\r\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);\", \"\"]);\n\n// Module\nexports.push([module.id, \"body {\\n  font-family: 'Source Sans Pro', sans-serif;\\n  color: #333;\\n  background-color: #f7f7f7; }\\n\\n.search-form {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  overflow: none;\\n  height: 100%;\\n  width: 200px;\\n  display: flex;\\n  flex-direction: column; }\\n  .search-form input {\\n    min-height: 12px;\\n    height: 12px;\\n    padding: 10px; }\\n  .search-form .search-results {\\n    flex-grow: 1;\\n    overflow-y: scroll; }\\n  .search-form .search-results .search-result {\\n    display: flex;\\n    height: 32px; }\\n    .search-form .search-results .search-result .nickname {\\n      flex-grow: 1;\\n      vertical-align: middle;\\n      line-height: 32px; }\\n  .search-form .search-results .search-result {\\n    border-bottom: 1px dashed #ddd;\\n    box-sizing: border-box; }\\n    .search-form .search-results .search-result .avatar {\\n      width: 32px;\\n      height: 32px;\\n      margin-right: 10px; }\\n  .search-form ul {\\n    margin: 0;\\n    padding: 0; }\\n  .search-form li {\\n    list-style-type: none; }\\n    .search-form li.selected {\\n      background-color: #eee; }\\n\\n.match-history .match {\\n  border: 1px solid #eee;\\n  background: white;\\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\\n  margin: 10px;\\n  padding: 10px; }\\n  .match-history .match .home-team {\\n    font-weight: bold;\\n    font-style: italic; }\\n\\n.match-history .win {\\n  color: green; }\\n\\n.match-history .loss {\\n  color: red; }\\n\\n.main-content {\\n  margin-left: 200px; }\\n\\n.player-details .player-avatar {\\n  width: 170px;\\n  height: 170px; }\\n\", \"\"]);\n\n","const React = require(\"karet\")\r\nconst {Atom} = require(\"kefir.atom\")\r\nconst R = require(\"ramda\")\r\nconst pathToRegexp = require(\"path-to-regexp\")\r\n\r\nconst RouterContext = React.createContext()\r\n\r\nconst getCurrentLocation = () => window.location.hash\r\n\r\n// This atom provides the location info for the app\r\n// Currently it is simply the hash part\r\nconst Location = new Atom(getCurrentLocation())\r\n\r\nLocation.onValue(hash => {\r\n  console.log(\"Sync Atom -> window.location\")\r\n  window.location.hash = hash\r\n})\r\n\r\nwindow.onhashchange = () => {\r\n  console.log(\"Sync window.location -> Atom\")\r\n  Location.set(getCurrentLocation())\r\n}\r\n\r\nconst navigate = hash => Location.set(hash)\r\n\r\nconst BrowserRouter = ({children}) => {\r\n  return (\r\n    <RouterContext.Provider value={Location}>\r\n      {children}\r\n    </RouterContext.Provider>\r\n  )\r\n}\r\n\r\nconst prepareRegex = hash => {\r\n  let keys = []\r\n  const regex = pathToRegexp(hash, keys)\r\n  const paramNames = keys.map(R.prop(\"name\"))\r\n  return [regex, paramNames]\r\n}\r\n\r\nconst Route = ({hash, Component}) => {\r\n  const [regex, paramNames] = prepareRegex(hash)\r\n\r\n  return (\r\n    <RouterContext.Consumer>\r\n      {location => <React.Fragment>\r\n        {location.map(hash => {\r\n          const match = regex.exec(hash)\r\n          if (match) {\r\n            const paramMatches = R.tail(match)\r\n            const params = R.zipObj(paramNames, paramMatches)\r\n            return <Component key=\"1\" params={params} location={location} />\r\n          }\r\n        })}\r\n      </React.Fragment>}\r\n    </RouterContext.Consumer>\r\n  )\r\n}\r\n\r\nconst Link = ({href, ...props}) =>\r\n  <RouterContext.Consumer>\r\n    {location => <a href={href} onClick={onClick(href, location)} {...props} />}\r\n  </RouterContext.Consumer>\r\n\r\nconst onClick = (href, location) => () =>\r\n  location.view(\"pathname\").set(href)\r\n\r\n\r\nmodule.exports = {BrowserRouter, Route, Link, navigate}\r\n","const React = require(\"karet\")\r\nconst R = require(\"ramda\")\r\nconst U = require(\"karet.util\")\r\n\r\nconst FaceitClient = require(\"./Faceit.js\")\r\nconst MatchList = require(\"./MatchList.jsx\")\r\nconst {Spinner} = require(\"./Common.jsx\")\r\n\r\nconst PlayerDetails = ({params: {playerId}}) => {\r\n  const player = FaceitClient.getPlayer(playerId).toProperty()\r\n\r\n  const steamId = U.view(\"steam_id_64\", player)\r\n  return <div className=\"player-details\">\r\n    {U.ifElse(player.map(R.isNil),\r\n      <Spinner />,\r\n      <div>\r\n        <h2>{U.view(\"nickname\", player)} ({U.view(\"country\", player)})</h2>\r\n        <img className=\"player-avatar\" src={U.view(\"avatar\", player)} />\r\n        {U.when(steamId, <p><a href={U.string`https://steamcommunity.com/profiles/${steamId}`}>Steam profile</a></p>)}\r\n        <table>\r\n          <tbody>\r\n            <tr><td>Player ID</td><td>{U.view(\"player_id\", player)}</td></tr>\r\n            <tr><td>Country</td><td>{U.view(\"country\", player)}</td></tr>\r\n            {U.when(player.map(R.path([\"games\", \"csgo\", \"faceit_elo\"])),\r\n              <tr><td>CSGO elo</td><td>{U.view([\"games\", \"csgo\", \"faceit_elo\"], player)}</td></tr>)}\r\n          </tbody>\r\n        </table>\r\n\r\n        <MatchList playerId={U.view(\"player_id\", player)} />\r\n      </div>,\r\n    )}\r\n  </div>\r\n}\r\n\r\nmodule.exports = PlayerDetails\r\n","const React = require(\"karet\")\r\nconst Kefir = require(\"kefir\")\r\nconst U = require(\"karet.util\")\r\nconst R = require(\"ramda\")\r\n\r\nconst FaceitClient = require(\"./Faceit.js\")\r\nconst {Spinner} = require(\"./Common.jsx\")\r\n\r\nconst MatchList = ({playerId}) => {\r\n  const matches = playerId\r\n    .flatMapLatest(playerId => FaceitClient.getHistory(playerId, \"csgo\"))\r\n    .toProperty(() => [])\r\n\r\n  return <div className=\"match-history\">\r\n    <h2>Match history</h2>\r\n    {U.mapElemsWithIds(\"match_id\", (match, id) =>\r\n      <Match key={id} playerId={playerId} matchId={U.view(\"match_id\", match)} />, matches)}\r\n  </div>\r\n}\r\n\r\nconst Match = ({playerId, matchId}) => {\r\n  const match = matchId.flatMapLatest(matchId => FaceitClient.getMatch(matchId)).toProperty()\r\n\r\n  const team1 = U.view([\"teams\", \"faction1\"], match)\r\n  const team2 = U.view([\"teams\", \"faction2\"], match)\r\n\r\n  const winOrLoss = U.when(match,\r\n    Kefir.combine([match], [playerId], (match, playerId) => {\r\n      return hasPlayer(playerId, winner(match))\r\n        ? <span className=\"win\">WIN</span>\r\n        : <span className=\"loss\">LOSS</span>\r\n    }))\r\n\r\n  const TeamName = mkTeamName(playerId)\r\n  return (\r\n    <div className=\"match\">\r\n      {U.ifElse(\r\n        R.isNil(match),\r\n        <Spinner />,\r\n        <div>\r\n          <p>\r\n            <TeamName team={team1} /> vs <TeamName team={team2} /> ({U.view(\"competition_name\", match)})\r\n          </p>\r\n          <p>{winOrLoss}</p>\r\n          <p>{U.view([\"started_at\", formatTime], match)}</p>\r\n        </div>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst winner = match => match.teams[match.results.winner]\r\n\r\nconst hasPlayer = (playerId, team) =>\r\n  team.roster.map(R.prop(\"player_id\")).includes(playerId)\r\n\r\nconst formatTime = date => date.toRelative()\r\n\r\nconst mkTeamName = playerId => ({team, className}) => {\r\n  const isHomeTeam = team => Kefir.combine([team], [playerId],\r\n    (team, playerId) => team.roster.map(R.prop(\"player_id\")).includes(playerId))\r\n  return <span className={U.cns(className, U.ifElse(isHomeTeam(team), \"home-team\", \"enemy-team\"))}>{U.view(\"name\", team)}</span>\r\n}\r\n\r\nmodule.exports = MatchList\r\n","const React = require(\"karet\")\r\nconst {Atom} = require(\"kefir.atom\")\r\nconst R = require(\"ramda\")\r\nconst U = require(\"karet.util\")\r\nconst Kefir = require(\"kefir\")\r\n\r\nconst FaceitClient = require(\"./Faceit.js\")\r\nconst {Spinner} = require(\"./Common.jsx\")\r\nconst {isAwaiting} = require(\"./Util.js\")\r\n\r\nconst Search = ({onSelect}) => {\r\n  const nameInput = new Atom(\"\")\r\n  const selectedIndex = new Atom(undefined)\r\n\r\n  const searchTerm = nameInput.filter(lengthAtLeast(3)).debounce(250).skipDuplicates()\r\n  const searchResults = searchTerm\r\n    .flatMapLatest(name => FaceitClient.searchPlayer(name))\r\n    .toProperty(() => [])\r\n\r\n  const loadingResults = isAwaiting(searchTerm, searchResults)\r\n\r\n  // Reset selection on new search results\r\n  searchResults.onValue(() => selectedIndex.set(undefined))\r\n\r\n  // Trigger onSelect handler on selection\r\n  Kefir.combine([selectedIndex], [searchResults])\r\n    .onValue(([idx, results]) => isDefined(idx) && onSelect(results[idx]))\r\n\r\n  const upsAndDowns = U.bus()\r\n  const onKeyDown = e => {\r\n    if ([\"ArrowDown\", \"ArrowUp\"].includes(e.key)) {\r\n      e.preventDefault()\r\n      e.persist()\r\n      upsAndDowns.push(e)\r\n    }\r\n  }\r\n\r\n  Kefir.combine([upsAndDowns], [selectedIndex, searchResults])\r\n    .onValue(([e, idx, items]) => {\r\n      // If there are no items, nothing can be selected\r\n      if (items.length === 0) {\r\n        return selectedIndex.set(undefined)\r\n      }\r\n\r\n      // If there is nothing selected, always select the first item\r\n      if (!isDefined(idx)) {\r\n        return selectedIndex.set(0)\r\n      }\r\n\r\n      // Otherwise select the previous/next item unless at the start or end of the list\r\n      const mod = e.key === \"ArrowUp\" ? R.dec : R.inc\r\n      const newIdx = limitRange(0, items.length)(mod(idx))\r\n      selectedIndex.set(newIdx)\r\n    })\r\n\r\n  // Reference to input to keep focus on it\r\n  const inputRef = new Atom()\r\n  inputRef.onValue(ref => ref.focus())\r\n\r\n  return <div className=\"search-form\">\r\n    <input\r\n      ref={U.set(inputRef)}\r\n      type=\"text\"\r\n      value={nameInput}\r\n      onKeyDown={onKeyDown}\r\n      onChange={U.getProps({value: nameInput})} />\r\n\r\n    {U.when(loadingResults, <Spinner />)}\r\n\r\n    <ul className=\"search-results\"\r\n      onMouseDown={e => {\r\n        e.preventDefault()\r\n        inputRef.get().focus()\r\n      }}>\r\n      {U.mapElems((x, idx) => {\r\n        const selected = selectedIndex.map(R.equals(idx))\r\n        const ref = new Atom()\r\n        selected.filter(R.identity).onValue(() => scrollVisible(ref.get()))\r\n        return (\r\n          <SearchResultPlayer result={x}\r\n            ref={U.set(ref)}\r\n            key={idx}\r\n            onClick={() => selectedIndex.set(idx)}\r\n            className={U.cns(U.when(selected, \"selected\"))} />\r\n        )\r\n      }, searchResults)}\r\n    </ul>\r\n  </div>\r\n}\r\n\r\nconst SearchResultPlayer = React.forwardRef(({result, className, ...props}, ref) => (\r\n  <li {...props} ref={ref} className={U.cns(\"search-result\", className)}>\r\n    <img className=\"avatar\" src={U.view(\"avatar\", result)} />\r\n    <span className=\"nickname\">{U.view(\"nickname\", result)}</span>\r\n  </li>\r\n))\r\n\r\nconst scrollVisible = element =>\r\n  element && element.scrollIntoView({ block: \"nearest\" })\r\n\r\nconst lengthAtLeast = n => R.compose(R.lte(n), R.length)\r\n\r\nconst limitRange = (min, max) => R.pipe(R.min(max), R.max(min))\r\n\r\nconst isDefined = x => typeof x !== \"undefined\"\r\n\r\nmodule.exports = {Search}\r\n","const Kefir = require(\"kefir\")\r\n\r\nconst isAwaiting = (stream, derivative) =>\r\n  Kefir.merge([\r\n    stream.map(() => true),\r\n    derivative.map(() => false),\r\n  ])\r\n\r\nmodule.exports = {isAwaiting}\r\n"],"sourceRoot":""}