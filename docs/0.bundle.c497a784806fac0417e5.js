(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){var r=n(5),a=n(13).render,l=n(4).Atom,c=n(6),o=n(2),i=n(10);n(17);var s=n(9),u=n(23),m=function(e){var t=e.selection,n=new l(""),a=new l(0),u=n.filter(h(3)).debounce(250).flatMapLatest(function(e){return s.searchPlayer(e)}).toProperty(function(){return[]});u.onValue(function(){return a.set(0)}),o.combine([a,u],function(e,t){return c.path([e,"player_id"],t)}).onValue(function(e){return t.set(e)});var m=u.map(c.complement(c.isEmpty)),f=i.bus();o.combine([f,u],function(e,t){var n="ArrowUp"===e.key?c.dec:c.inc;return function(e){return c.min(c.max(0,n(e)),t.length-1)}}).onValue(function(e){return a.modify(e)});var d=new l;return d.onValue(function(e){return e.focus()}),r.createElement("div",{className:"search-form"},r.createElement("input",{ref:i.set(d),type:"text",value:n,onKeyDown:function(e){["ArrowDown","ArrowUp"].includes(e.key)&&(e.preventDefault(),e.persist(),f.push(e))},onChange:i.getProps({value:n})}),i.ifElse(m,r.createElement("ul",{className:"search-results",onMouseDown:function(e){e.preventDefault(),d.get().focus()}},i.mapElems(function(e,t){var n=a.map(c.equals(t)),o=new l;return n.filter(c.identity).onValue(function(){return p(o.get())}),r.createElement("li",{ref:i.set(o),key:t,onClick:function(){return a.set(t)},className:i.cns(i.when(n,"selected"))},i.view("nickname",e))},u)),r.createElement("p",null,"No results")))},p=function(e){return e&&e.scrollIntoView({block:"nearest"})},f=function(e){var t=e.selection,n=t.debounce(500).flatMapLatest(function(e){return s.getPlayer(e)}).toProperty(function(){}),a=o.combine([t,n.map(c.prop("player_id"))],c.complement(c.equals));return r.createElement("div",{className:"player-details"},i.ifElse(a,r.createElement("p",null,"Loading..."),r.createElement("div",null,r.createElement("h2",null,i.view("nickname",n)," (",i.view("country",n),")"),r.createElement("img",{className:"player-avatar",src:i.view("avatar",n)}),r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Player ID"),r.createElement("td",null,i.view("player_id",n))),r.createElement("tr",null,r.createElement("td",null,"Country"),r.createElement("td",null,i.view("country",n))),i.when(n.map(c.path(["platforms","steam"])),r.createElement("tr",null,r.createElement("td",null,"Steam ID"),r.createElement("td",null,i.view(["platforms","steam"],n)))),i.when(n.map(c.path(["games","csgo","faceit_elo"])),r.createElement("tr",null,r.createElement("td",null,"CSGO elo"),r.createElement("td",null,i.view(["games","csgo","faceit_elo"],n)))))),r.createElement(u,{playerId:i.view("player_id",n)}))))},h=function(e){return c.compose(c.lte(e),c.length)};a(r.createElement(function(){var e=new l("");return r.createElement(r.Fragment,null,r.createElement(m,{selection:e}),r.createElement("div",{className:"main-content"},i.ifElse(e,r.createElement(f,{selection:e}),r.createElement("p",null,"Select a player from search results"))))},null),document.getElementById("app"))},17:function(e,t,n){var r=n(18);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(20)(r,a);r.locals&&(e.exports=r.locals)},18:function(e,t,n){(t=e.exports=n(19)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);",""]),t.push([e.i,"body {\n  font-family: 'Source Sans Pro', sans-serif;\n  color: #333;\n  background-color: #f7f7f7; }\n\n.search-form {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  width: 200px;\n  position: fixed;\n  top: 0;\n  left: 0;\n  overflow: none; }\n  .search-form .search-results {\n    flex-grow: 1; }\n  .search-form input {\n    height: 30px;\n    padding: 5px; }\n  .search-form .search-results {\n    height: 100%;\n    overflow-y: scroll; }\n  .search-form ul {\n    margin: 0;\n    padding: 0; }\n  .search-form li {\n    list-style-type: none; }\n    .search-form li.selected {\n      background-color: #eee; }\n\n.match-history .match {\n  border: 1px solid #eee;\n  background: white;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  margin: 10px;\n  padding: 10px; }\n  .match-history .match .home-team {\n    font-weight: bold;\n    font-style: italic; }\n\n.match-history .win {\n  color: green; }\n\n.match-history .loss {\n  color: red; }\n\n.main-content {\n  margin-left: 200px; }\n\n.player-details .player-avatar {\n  width: 170px;\n  height: 170px; }\n",""])},23:function(e,t,n){var r=n(5),a=n(2),l=n(10),c=n(6),o=n(9),i=function(e){var t=e.playerId,n=e.matchId.flatMapLatest(function(e){return o.getMatch(e)}).toProperty(),i=l.view(["teams","faction1"],n),h=l.view(["teams","faction2"],n),d=l.when(n,a.combine([n],[t],function(e,t){return u(t,s(e))?r.createElement("span",{className:"win"},"WIN"):r.createElement("span",{className:"loss"},"LOSS")})),y=f(t);return r.createElement("div",{className:"match"},l.ifElse(c.isNil(n),r.createElement(p,null),r.createElement("div",null,r.createElement("p",null,r.createElement(y,{team:i})," vs ",r.createElement(y,{team:h})," (",l.view("competition_name",n),")"),r.createElement("p",null,d),r.createElement("p",null,l.view(["started_at",m],n)))))},s=function(e){return e.teams[e.results.winner]},u=function(e,t){return t.roster.map(c.prop("player_id")).includes(e)},m=function(e){return e.toRelative()},p=function(){return r.createElement("p",null,"Loading...")},f=function(e){return function(t){var n=t.team,o=t.className;return r.createElement("span",{className:l.cns(o,l.ifElse(function(t){return a.combine([t],[e],function(e,t){return e.roster.map(c.prop("player_id")).includes(t)})}(n),"home-team","enemy-team"))},l.view("name",n))}};e.exports=function(e){var t=e.playerId,n=t.flatMapLatest(function(e){return o.getHistory(e,"csgo")}).toProperty(function(){return[]});return r.createElement("div",{className:"match-history"},r.createElement("h2",null,"Match history"),l.mapElemsWithIds("match_id",function(e,n){return r.createElement(i,{key:n,playerId:t,matchId:l.view("match_id",e)})},n))}},9:function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(2),c=n(6),o=n(22).DateTime,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base="https://open.faceit.com/data/v4",this.apiKey=t,this.authHeaders={Authorization:"Bearer ".concat(this.apiKey)}}var t,n,i;return t=e,(n=[{key:"searchPlayer",value:function(e){return this.callApi("GET","/search/players",{nickname:e,limit:"1000",game:"csgo"}).map(c.prop("items"))}},{key:"getPlayer",value:function(e){return this.callApi("GET","/players/".concat(e))}},{key:"getHistory",value:function(e,t){return this.callApi("GET","/players/".concat(e,"/history"),{game:t}).map(c.prop("items"))}},{key:"getMatch",value:function(e){return this.callApi("GET","/matches/".concat(e)).map(function(e){return c.mergeLeft({started_at:o.fromSeconds(e.started_at)},e)})}},{key:"getMatchStats",value:function(e){return this.callApi("GET","/matches/".concat(e,"/stats"))}},{key:"callApi",value:function(e,t,n){var r="".concat(this.base).concat(t,"?").concat(this.mkQueryString(n));return l.fromPromise(fetch(r,{method:e,headers:this.authHeaders}).then(function(e){return e.json()}))}},{key:"mkQueryString",value:function(e){if(!e)return"";var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var n=r(e,2),a=n[0],l=n[1];return t.append(a,String(l))}),t.toString()}}])&&a(t.prototype,n),i&&a(t,i),e}();e.exports=new i("82592226-3fb7-41cf-941c-7098de7d84c7")}},[[11,1,2]]]);
//# sourceMappingURL=0.bundle.c497a784806fac0417e5.js.map