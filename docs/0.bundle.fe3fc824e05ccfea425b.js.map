{"version":3,"sources":["webpack:///./src/App.jsx","webpack:///./src/style.scss?f8f3","webpack:///./src/style.scss","webpack:///./src/MatchList.jsx","webpack:///./src/Faceit.js"],"names":["React","require","render","Atom","R","Kefir","U","FaceitClient","MatchList","Search","_ref","selection","nameInput","selectedIndex","searchResults","filter","lengthAtLeast","debounce","flatMapLatest","name","searchPlayer","toProperty","onValue","set","combine","idx","results","path","playerId","hasResults","map","complement","isEmpty","upsAndDowns","bus","e","mod","key","dec","inc","min","max","length","func","modify","inputRef","ref","focus","createElement","className","type","value","onKeyDown","includes","preventDefault","persist","push","onChange","getProps","ifElse","onMouseDown","get","mapElems","x","selected","equals","identity","scrollVisible","SearchResultPlayer","result","onClick","cns","when","forwardRef","_ref2","props","_objectWithoutProperties","_extends","src","view","element","scrollIntoView","block","PlayerDetails","_ref3","player","getPlayer","loading","prop","n","compose","lte","selectedPlayer","Fragment","document","getElementById","content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","Match","match","matchId","getMatch","team1","team2","winOrLoss","hasPlayer","winner","TeamName","mkTeamName","isNil","Spinner","team","formatTime","teams","roster","date","toRelative","isHomeTeam","matches","getHistory","mapElemsWithIds","id","DateTime","apiKey","_classCallCheck","this","base","authHeaders","Authorization","concat","nickname","callApi","limit","game","m","mergeLeft","started_at","fromSeconds","method","params","url","mkQueryString","fromPromise","fetch","headers","then","_","json","paramObject","searchParams","URLSearchParams","Object","entries","forEach","_slicedToArray","append","String","toString"],"mappings":"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","file":"0.bundle.fe3fc824e05ccfea425b.js","sourcesContent":["const React = require(\"karet\")\r\nconst {render} = require(\"react-dom\")\r\nconst {Atom} = require(\"kefir.atom\")\r\nconst R = require(\"ramda\")\r\nconst Kefir = require(\"kefir\")\r\nconst U = require(\"karet.util\")\r\n\r\nrequire(\"./style.scss\")\r\n\r\nconst FaceitClient = require(\"./Faceit.js\")\r\nconst MatchList = require(\"./MatchList.jsx\")\r\n\r\nconst App = () => {\r\n  const selectedPlayer = new Atom(\"\")\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Search selection={selectedPlayer} />\r\n      <div className=\"main-content\">\r\n        {U.ifElse(selectedPlayer,\r\n          <PlayerDetails selection={selectedPlayer} />,\r\n          <p>Select a player from search results</p>)}\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\nconst Search = ({selection}) => {\r\n  const nameInput = new Atom(\"\")\r\n  const selectedIndex = new Atom(0)\r\n\r\n  const searchResults = nameInput\r\n    .filter(lengthAtLeast(3))\r\n    .debounce(250)\r\n    .flatMapLatest(name => FaceitClient.searchPlayer(name))\r\n    .toProperty(() => [])\r\n\r\n  // Select first result automatically\r\n  searchResults.onValue(() => selectedIndex.set(0))\r\n\r\n  Kefir.combine(\r\n    [selectedIndex, searchResults],\r\n    (idx, results) => R.path([idx, \"player_id\"], results)\r\n  ).onValue(playerId => selection.set(playerId))\r\n\r\n  const hasResults = searchResults.map(R.complement(R.isEmpty))\r\n\r\n  const upsAndDowns = U.bus()\r\n  const onKeyDown = e => {\r\n    if ([\"ArrowDown\", \"ArrowUp\"].includes(e.key)) {\r\n      e.preventDefault()\r\n      e.persist()\r\n      upsAndDowns.push(e)\r\n    }\r\n  }\r\n  Kefir.combine([upsAndDowns, searchResults], (e, results) => {\r\n    const mod = e.key === \"ArrowUp\" ? R.dec : R.inc\r\n    return idx => R.min(R.max(0, mod(idx)), results.length - 1)\r\n  }).onValue(func => selectedIndex.modify(func))\r\n\r\n  // Reference to input to keep focus on it\r\n  const inputRef = new Atom()\r\n  inputRef.onValue(ref => ref.focus())\r\n\r\n  return <div className=\"search-form\">\r\n    <input\r\n      ref={U.set(inputRef)}\r\n      type=\"text\"\r\n      value={nameInput}\r\n      onKeyDown={onKeyDown}\r\n      onChange={U.getProps({value: nameInput})} />\r\n\r\n    {U.ifElse(hasResults,\r\n      <ul className=\"search-results\"\r\n        onMouseDown={e => {\r\n          e.preventDefault()\r\n          inputRef.get().focus()\r\n        }}>\r\n        {U.mapElems((x, idx) => {\r\n          const selected = selectedIndex.map(R.equals(idx))\r\n          const ref = new Atom()\r\n          selected.filter(R.identity).onValue(() => scrollVisible(ref.get()))\r\n          return (\r\n            <SearchResultPlayer result={x}\r\n              ref={U.set(ref)}\r\n              key={idx}\r\n              onClick={() => selectedIndex.set(idx)}\r\n              className={U.cns(U.when(selected, \"selected\"))} />\r\n          )\r\n        }, searchResults)}\r\n      </ul>,\r\n      <p>No results</p>)}\r\n  </div>\r\n}\r\n\r\nconst SearchResultPlayer = React.forwardRef(({result, className, ...props}, ref) => (\r\n  <li {...props} ref={ref} className={U.cns(\"search-result\", className)}>\r\n    <img className=\"avatar\" src={U.view(\"avatar\", result)} />\r\n    <span className=\"nickname\">{U.view(\"nickname\", result)}</span>\r\n  </li>\r\n))\r\n\r\nconst scrollVisible = element =>\r\n  element && element.scrollIntoView({ block: \"nearest\" })\r\n\r\nconst PlayerDetails = ({selection}) => {\r\n  const player = selection.debounce(500)\r\n    .flatMapLatest(playerId => FaceitClient.getPlayer(playerId))\r\n    .toProperty(() => undefined)\r\n\r\n  const loading = Kefir.combine(\r\n    [selection, player.map(R.prop(\"player_id\"))],\r\n    R.complement(R.equals)\r\n  )\r\n\r\n  return <div className=\"player-details\">\r\n    {U.ifElse(loading,\r\n      <p>Loading...</p>,\r\n      <div>\r\n        <h2>{U.view(\"nickname\", player)} ({U.view(\"country\", player)})</h2>\r\n        <img className=\"player-avatar\" src={U.view(\"avatar\", player)} />\r\n        <table>\r\n          <tbody>\r\n            <tr><td>Player ID</td><td>{U.view(\"player_id\", player)}</td></tr>\r\n            <tr><td>Country</td><td>{U.view(\"country\", player)}</td></tr>\r\n            {U.when(player.map(R.path([\"platforms\", \"steam\"])),\r\n              <tr><td>Steam ID</td><td>{U.view([\"platforms\", \"steam\"], player)}</td></tr>)}\r\n            {U.when(player.map(R.path([\"games\", \"csgo\", \"faceit_elo\"])),\r\n              <tr><td>CSGO elo</td><td>{U.view([\"games\", \"csgo\", \"faceit_elo\"], player)}</td></tr>)}\r\n          </tbody>\r\n        </table>\r\n\r\n        <MatchList playerId={U.view(\"player_id\", player)} />\r\n      </div>,\r\n    )}\r\n  </div>\r\n}\r\n\r\nconst lengthAtLeast = n => R.compose(R.lte(n), R.length)\r\n\r\nrender(<App />, document.getElementById(\"app\"))\r\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);\", \"\"]);\n\n// Module\nexports.push([module.id, \"body {\\n  font-family: 'Source Sans Pro', sans-serif;\\n  color: #333;\\n  background-color: #f7f7f7; }\\n\\n.search-form {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  overflow: none;\\n  height: 100%;\\n  width: 200px;\\n  display: flex;\\n  flex-direction: column; }\\n  .search-form input {\\n    min-height: 12px;\\n    height: 12px;\\n    padding: 10px; }\\n  .search-form .search-results {\\n    flex-grow: 1;\\n    overflow-y: scroll; }\\n  .search-form .search-results .search-result {\\n    display: flex;\\n    height: 32px; }\\n    .search-form .search-results .search-result .nickname {\\n      flex-grow: 1;\\n      vertical-align: middle;\\n      line-height: 32px; }\\n  .search-form .search-results .search-result {\\n    border-bottom: 1px dashed #ddd;\\n    box-sizing: border-box; }\\n    .search-form .search-results .search-result .avatar {\\n      width: 32px;\\n      height: 32px;\\n      margin-right: 10px; }\\n  .search-form ul {\\n    margin: 0;\\n    padding: 0; }\\n  .search-form li {\\n    list-style-type: none; }\\n    .search-form li.selected {\\n      background-color: #eee; }\\n\\n.match-history .match {\\n  border: 1px solid #eee;\\n  background: white;\\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\\n  margin: 10px;\\n  padding: 10px; }\\n  .match-history .match .home-team {\\n    font-weight: bold;\\n    font-style: italic; }\\n\\n.match-history .win {\\n  color: green; }\\n\\n.match-history .loss {\\n  color: red; }\\n\\n.main-content {\\n  margin-left: 200px; }\\n\\n.player-details .player-avatar {\\n  width: 170px;\\n  height: 170px; }\\n\", \"\"]);\n\n","const React = require(\"karet\")\r\nconst Kefir = require(\"kefir\")\r\nconst U = require(\"karet.util\")\r\nconst R = require(\"ramda\")\r\n\r\nconst FaceitClient = require(\"./Faceit.js\")\r\n\r\nconst MatchList = ({playerId}) => {\r\n  const matches = playerId\r\n    .flatMapLatest(playerId => FaceitClient.getHistory(playerId, \"csgo\"))\r\n    .toProperty(() => [])\r\n\r\n  return <div className=\"match-history\">\r\n    <h2>Match history</h2>\r\n    {U.mapElemsWithIds(\"match_id\", (match, id) =>\r\n      <Match key={id} playerId={playerId} matchId={U.view(\"match_id\", match)} />, matches)}\r\n  </div>\r\n}\r\n\r\nconst Match = ({playerId, matchId}) => {\r\n  const match = matchId.flatMapLatest(matchId => FaceitClient.getMatch(matchId)).toProperty()\r\n\r\n  const team1 = U.view([\"teams\", \"faction1\"], match)\r\n  const team2 = U.view([\"teams\", \"faction2\"], match)\r\n\r\n  const winOrLoss = U.when(match,\r\n    Kefir.combine([match], [playerId], (match, playerId) => {\r\n      return hasPlayer(playerId, winner(match))\r\n        ? <span className=\"win\">WIN</span>\r\n        : <span className=\"loss\">LOSS</span>\r\n    }))\r\n\r\n  const TeamName = mkTeamName(playerId)\r\n  return (\r\n    <div className=\"match\">\r\n      {U.ifElse(\r\n        R.isNil(match),\r\n        <Spinner />,\r\n        <div>\r\n          <p>\r\n            <TeamName team={team1} /> vs <TeamName team={team2} /> ({U.view(\"competition_name\", match)})\r\n          </p>\r\n          <p>{winOrLoss}</p>\r\n          <p>{U.view([\"started_at\", formatTime], match)}</p>\r\n        </div>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst winner = match => match.teams[match.results.winner]\r\n\r\nconst hasPlayer = (playerId, team) =>\r\n  team.roster.map(R.prop(\"player_id\")).includes(playerId)\r\n\r\nconst formatTime = date => date.toRelative()\r\n\r\nconst Spinner = () => <p>Loading...</p>\r\n\r\nconst mkTeamName = playerId => ({team, className}) => {\r\n  const isHomeTeam = team => Kefir.combine([team], [playerId],\r\n    (team, playerId) => team.roster.map(R.prop(\"player_id\")).includes(playerId))\r\n  return <span className={U.cns(className, U.ifElse(isHomeTeam(team), \"home-team\", \"enemy-team\"))}>{U.view(\"name\", team)}</span>\r\n}\r\n\r\nmodule.exports = MatchList\r\n","const Kefir = require(\"kefir\")\r\nconst R = require(\"ramda\")\r\nconst {DateTime} = require(\"luxon\")\r\n\r\nconst API_KEY = \"82592226-3fb7-41cf-941c-7098de7d84c7\"\r\n\r\nclass FaceitClient {\r\n  constructor(apiKey) {\r\n    this.base = \"https://open.faceit.com/data/v4\"\r\n    this.apiKey = apiKey\r\n    this.authHeaders = {\"Authorization\": `Bearer ${this.apiKey}`}\r\n  }\r\n\r\n  searchPlayer(nickname) {\r\n    return this.callApi(\"GET\", \"/search/players\", {nickname, limit: \"1000\", game: \"csgo\"})\r\n      .map(R.prop(\"items\"))\r\n  }\r\n\r\n  getPlayer(playerId) {\r\n    return this.callApi(\"GET\", `/players/${playerId}`)\r\n  }\r\n\r\n  getHistory(playerId, game) {\r\n    return this.callApi(\"GET\", `/players/${playerId}/history`, {game})\r\n      .map(R.prop(\"items\"))\r\n  }\r\n\r\n  getMatch(matchId) {\r\n    return this.callApi(\"GET\", `/matches/${matchId}`)\r\n      .map(m => R.mergeLeft({\r\n        started_at: DateTime.fromSeconds(m.started_at),\r\n      }, m))\r\n  }\r\n\r\n  getMatchStats(matchId) {\r\n    return this.callApi(\"GET\", `/matches/${matchId}/stats`)\r\n  }\r\n\r\n  callApi(method, path, params) {\r\n    const url = `${this.base}${path}?${this.mkQueryString(params)}`\r\n    return Kefir.fromPromise(\r\n      fetch(url, {method, headers: this.authHeaders}).then(_ => _.json())\r\n    )\r\n  }\r\n\r\n  mkQueryString(paramObject) {\r\n    if (!paramObject) return \"\"\r\n\r\n    const searchParams = new URLSearchParams()\r\n    Object.entries(paramObject).forEach(([key, value]) =>\r\n      searchParams.append(key, String(value)))\r\n    return searchParams.toString()\r\n  }\r\n}\r\n\r\nmodule.exports = new FaceitClient(API_KEY)\r\n"],"sourceRoot":""}