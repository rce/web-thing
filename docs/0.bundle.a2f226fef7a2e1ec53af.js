(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=r(2),o=r(6),i=r(27).DateTime,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base="https://open.faceit.com/data/v4",this.apiKey=t,this.authHeaders={Authorization:"Bearer ".concat(this.apiKey)}}var t,r,a;return t=e,(r=[{key:"searchPlayer",value:function(e){return this.callApi("GET","/search/players",{nickname:e,limit:"1000",game:"csgo"}).map(o.prop("items"))}},{key:"getPlayer",value:function(e){return this.callApi("GET","/players/".concat(e))}},{key:"getHistory",value:function(e,t){return this.callApi("GET","/players/".concat(e,"/history"),{game:t}).map(o.prop("items"))}},{key:"getMatch",value:function(e){return this.callApi("GET","/matches/".concat(e)).map((function(e){return o.mergeLeft({started_at:i.fromSeconds(e.started_at)},e)}))}},{key:"getMatchStats",value:function(e){return this.callApi("GET","/matches/".concat(e,"/stats"))}},{key:"callApi",value:function(e,t,r){var n=this,a="".concat(this.base).concat(t,"?").concat(this.mkQueryString(r));return l.stream((function(r){var c=new AbortController,l=c.signal,o=!1;return fetch(a,{method:e,headers:n.authHeaders,signal:l}).then((function(e){return e.json()})).then((function(e){o=!0,r.emit(e),r.end()})).catch((function(e){r.error(e),r.end()})),function(){o||(console.log("Cancelling request in progress: ".concat(t)),c.abort())}}))}},{key:"mkQueryString",value:function(e){if(!e)return"";var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var r=n(e,2),a=r[0],c=r[1];return t.append(a,String(c))})),t.toString()}}])&&c(t.prototype,r),a&&c(t,a),e}();e.exports=new u("82592226-3fb7-41cf-941c-7098de7d84c7")},function(e,t,r){var n=r(5);e.exports={Spinner:function(){return n.createElement("p",null,"Loading...")}}},function(e,t,r){var n=r(2),a=r(6);e.exports={isAwaiting:function(e,t){return n.merge([e.map((function(){return!0})),t.map((function(){return!1}))])},toggle:function(e){return function(){return e.modify(a.not)}}}},function(e,t,r){var n=r(1),a=r(29).default,c=[n.prop("avatar"),n.reread((function(e){return""===e?void 0:e})),n.defaults(a)];e.exports={avatarLens:c}},,,function(e,t,r){var n=r(5),a=r(16).render;r(20);var c=r(24),l=c.BrowserRouter,o=c.Route,i=c.navigate,u=r(26),s=r(30).Search;a(n.createElement((function(){return n.createElement(l,null,n.createElement(s,{onSelect:function(e){return i("#/player/".concat(e.player_id))}}),n.createElement("div",{className:"main-content"},n.createElement(o,{hash:"#/player/:playerId",Component:u})))}),null),document.getElementById("app"))},,,,,,,function(e,t,r){var n=r(21),a=r(22);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var c={insert:"head",singleton:!1},l=(n(a,c),a.locals?a.locals:{});e.exports=l},,function(e,t,r){(t=r(23)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);"]),t.push([e.i,"body{font-family:'Source Sans Pro', sans-serif;color:#333;background-color:#f7f7f7}.search-form{position:fixed;top:0;left:0;overflow:none;height:100%;width:300px;display:flex;flex-direction:column}.search-form input{min-height:12px;height:12px;padding:10px}.search-form .search-results{flex-grow:1;overflow-y:scroll}.search-form .search-results .search-result{display:flex;height:32px}.search-form .search-results .search-result .nickname{flex-grow:1;vertical-align:middle;line-height:32px}.search-form .search-results .search-result{border-bottom:1px dashed #ddd;box-sizing:border-box}.search-form .search-results .search-result .avatar{width:32px;height:32px;margin-right:10px}.search-form ul{margin:0;padding:0}.search-form li{list-style-type:none}.search-form li.selected{background-color:#eee}.main-content{margin-left:300px}.player{display:flex;flex-direction:row}.player .player-avatar{width:170px;height:170px}.player .player-info{flex-grow:1;padding-left:20px}.match{margin:10px 0;padding:5px 0}.match .match-header{display:flex;flex-direction:row}.match .match-header .result{width:100px}.match .match-header .match-name{flex-grow:1;padding-left:20px}.match .match-header .timestamp{width:150px;padding:0 20px}.match .match-header .toggle{width:16px;padding:0 20px}.match .match-details .teams{display:flex;flex-direction:row}.match .match-details .teams .team{flex-grow:1;display:flex;flex-direction:row}.match .match-details .teams .team .avatar{width:240px;height:240px}.match .match-details .teams .team .players{flex-grow:1;padding-left:20px}.match{border:1px solid #eee;background:white;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2)}.match .match-header .result{text-align:center}.match .match-header .result .win{color:green}.match .match-header .result .loss{color:red}.match .match-header .match-name{border-left:1px solid lightgray;border-right:1px solid lightgray}.match .match-header .match-name .home-team{text-decoration:underline}.match .match-header .timestamp{text-align:center}.match .match-header .toggle{text-align:center;border-left:1px solid lightgray}.match .match-details{padding:20px;border-top:1px solid lightgray}\n",""]),e.exports=t},,function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(5),i=r(4).Atom,u=r(6),s=r(25).pathToRegexp,m=o.createContext(),f=function(){return window.location.hash},p=new i(f());p.onValue((function(e){console.log("Sync Atom -> window.location"),window.location.hash=e})),window.onhashchange=function(){console.log("Sync window.location -> Atom"),p.set(f())};var h=function(e,t){return function(){return t.view("pathname").set(e)}};e.exports={BrowserRouter:function(e){var t=e.children;return o.createElement(m.Provider,{value:p},t)},Route:function(e){var t=e.hash,r=e.Component,n=c(function(e){var t=[];return[s(e,t),t.map(u.prop("name"))]}(t),2),a=n[0],l=n[1];return o.createElement(m.Consumer,null,(function(e){return o.createElement(o.Fragment,null,e.map((function(t){var n=a.exec(t);if(n){var c=u.tail(n),i=u.zipObj(l,c);return o.createElement(r,{key:"1",params:i,location:e})}})))}))},Link:function(e){var t=e.href,r=a(e,["href"]);return o.createElement(m.Consumer,null,(function(e){return o.createElement("a",n({href:t,onClick:h(t,e)},r))}))},navigate:function(e){return p.set(e)}}},,function(e,t,r){function n(){var e=c(["https://steamcommunity.com/profiles/",""]);return n=function(){return e},e}function a(){var e=c(["https://www.faceit.com/en/players/",""]);return a=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=r(5),o=r(6),i=r(11),u=r(4).Atom,s=r(7),m=r(28),f=r(8).Spinner,p=r(9).toggle,h=r(10).avatarLens;e.exports=function(e){var t=e.params.playerId,r=s.getPlayer(t).toProperty(),c=new u(!1),d=i.view("steam_id_64",r),v=i.view(["games","csgo","faceit_elo"],r);return l.createElement("div",null,i.ifElse(r.map(o.isNil),l.createElement(f,null),l.createElement("div",null,l.createElement("div",{className:"player"},l.createElement("img",{className:"player-avatar",src:i.view(h,r)}),l.createElement("div",{className:"player-info"},l.createElement("h2",null,i.view("nickname",r)," (",i.view("country",r),")"),l.createElement("ul",null,l.createElement("li",null,l.createElement("a",{href:i.string(a(),i.view("nickname",r))},"FACEIT profile")),i.when(d,l.createElement("li",null,l.createElement("a",{href:i.string(n(),d)},"Steam profile"))),i.when(v,l.createElement("li",null,"CS:GO elo ",v))))),l.createElement("div",null,l.createElement("button",{onClick:p(c)},"Show JSON"),i.when(c,l.createElement("pre",null,i.stringify(r,null,2)))),l.createElement(m,{playerId:i.view("player_id",r)}))))}},,function(e,t,r){var n=r(5),a=r(2),c=r(4).Atom,l=r(11),o=r(6),i=r(7),u=r(8).Spinner,s=r(9).toggle,m=r(10).avatarLens,f=function(e){var t=e.playerId,r=e.matchId.flatMapLatest((function(e){return i.getMatch(e)})).toProperty((function(){}));return n.createElement("div",{className:"match"},l.cond([r.map(o.isNil),n.createElement(u,null)],[r.map((function(e){return 2===e.version})),n.createElement(h,{playerId:t,match:r})],[r.map((function(e){return 1===e.version})),n.createElement(p,{playerId:t,match:r})],[n.createElement("p",null,"Unknown match version")]))},p=function(e){var t=e.match,r=e.playerId,i=o.prop("roster_v1"),u=o.prop("guid"),m=new c(!1),f=l.view(["teams","faction1"],t),p=l.view(["teams","faction2"],t),h=l.when(t,a.combine([t],[r],(function(e,t){return y(i,u)(t,v(e))?n.createElement("span",{className:"win"},"WIN"):n.createElement("span",{className:"loss"},"LOSS")}))),E=w(i,u)(r);return n.createElement("div",null,n.createElement("div",{className:"match-header",onClick:s(m)},n.createElement("div",{className:"result"},n.createElement("p",null,h)),n.createElement("div",{className:"match-name"},n.createElement("p",null,n.createElement(E,{team:f})," vs ",n.createElement(E,{team:p}))),n.createElement("div",{className:"timestamp"},n.createElement("p",null,l.view(["started_at",g],t))),n.createElement("div",{className:"toggle"},n.createElement("p",null,l.ifElse(m,n.createElement("i",{className:"fas fa-chevron-down"}),n.createElement("i",{className:"fas fa-chevron-right"}))))),l.when(m,n.createElement(d,{match:t,getRoster:i})))},h=function(e){var t=e.match,r=e.playerId,i=o.prop("roster"),u=o.prop("player_id"),s=new c(!1),m=l.view(["teams","faction1"],t),f=l.view(["teams","faction2"],t),p=l.when(t,a.combine([t],[r],(function(e,t){return y(i,u)(t,v(e))?n.createElement("span",{className:"win"},"WIN"):n.createElement("span",{className:"loss"},"LOSS")}))),h=w(i,u)(r);return n.createElement("div",null,n.createElement("div",{className:"match-header",onClick:function(){return s.modify(o.not)}},n.createElement("div",{className:"result"},n.createElement("p",null,p)),n.createElement("div",{className:"match-name"},n.createElement("p",null,n.createElement(h,{team:m})," vs ",n.createElement(h,{team:f}))),n.createElement("div",{className:"timestamp"},n.createElement("p",null,l.view(["started_at",g],t))),n.createElement("div",{className:"toggle"},n.createElement("p",null,l.ifElse(s,n.createElement("i",{className:"fas fa-chevron-down"}),n.createElement("i",{className:"fas fa-chevron-right"}))))),l.when(l.lift(o.and)(s,t),n.createElement(d,{match:t,getRoster:i})))},d=function(e){var t=e.match,r=e.getRoster,a=new c(!1),i=l.lift((function(e){return n.createElement("div",{className:"team"},n.createElement("img",{className:"avatar",src:l.view(m,e)}),n.createElement("div",{className:"players"},n.createElement("h2",null,l.view("name",e)),n.createElement("ul",null,l.mapElems((function(e,t){return n.createElement("li",{key:t},l.view("nickname",e))}),r(e)))))}));return n.createElement("div",{className:"match-details"},n.createElement("div",{className:"teams"},i(t.map(o.path(["teams","faction1"]))),i(t.map(o.path(["teams","faction2"])))),n.createElement("button",{onClick:s(a)},"Show JSON"),l.when(a,n.createElement("pre",null,l.stringify(t,null,2))))},v=function(e){return e.teams[e.results.winner]},y=function(e,t){return function(r,n){return e(n).map(t).includes(r)}},g=function(e){return e.toRelative()},w=function(e,t){return function(r){return function(c){var o=c.team,i=c.className;return n.createElement("span",{className:l.cns(i,l.ifElse(function(n){return a.combine([n],[r],(function(r,n){return e(r).map(t).includes(n)}))}(o),"home-team","enemy-team"))},l.view("name",o))}}};e.exports=function(e){var t=e.playerId,r=t.flatMapLatest((function(e){return i.getHistory(e,"csgo")})).toProperty((function(){return[]}));return n.createElement("div",{className:"match-history"},n.createElement("h2",null,"Match history"),l.mapElemsWithIds("match_id",(function(e,r){return n.createElement(f,{key:r,playerId:t,matchId:l.view("match_id",e)})}),r))}},function(e,t,r){"use strict";r.r(t),t.default=r.p+"7a2dcae25524daba0f2f1485ce5c07e3.jpg"},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(5),i=r(4).Atom,u=r(6),s=r(11),m=r(2),f=r(7),p=r(8).Spinner,h=r(9).isAwaiting,d=r(10).avatarLens,v=o.forwardRef((function(e,t){var r=e.result,c=e.className,l=a(e,["result","className"]);return o.createElement("li",n({},l,{ref:t,className:s.cns("search-result",c)}),o.createElement("img",{className:"avatar",src:s.view(d,r)}),o.createElement("span",{className:"nickname"},s.view("nickname",r)))})),y=function(e){return e&&e.scrollIntoView({block:"nearest"})},g=function(e){return u.compose(u.lte(e),u.length)},w=function(e,t){return u.pipe(u.min(t),u.max(e))},E=function(e){return void 0!==e};e.exports={Search:function(e){var t=e.onSelect,r=new i(""),n=new i(void 0),a=r.filter(g(3)).debounce(250).skipDuplicates(),l=a.flatMapLatest((function(e){return f.searchPlayer(e)})).toProperty((function(){return[]})),d=h(a,l);l.onValue((function(){return n.set(void 0)})),m.combine([n],[l]).onValue((function(e){var r=c(e,2),n=r[0],a=r[1];return E(n)&&t(a[n])}));var b=s.bus();m.combine([b],[n,l]).onValue((function(e){var t=c(e,3),r=t[0],a=t[1],l=t[2];if(0===l.length)return n.set(void 0);if(!E(a))return n.set(0);var o="ArrowUp"===r.key?u.dec:u.inc,i=w(0,l.length)(o(a));n.set(i)}));var x=new i;return x.onValue((function(e){return e.focus()})),o.createElement("div",{className:"search-form"},o.createElement("input",{ref:s.set(x),type:"text",value:r,onKeyDown:function(e){["ArrowDown","ArrowUp"].includes(e.key)&&(e.preventDefault(),e.persist(),b.push(e))},onChange:s.getProps({value:r})}),s.when(d,o.createElement(p,null)),o.createElement("ul",{className:"search-results",onMouseDown:function(e){e.preventDefault(),x.get().focus()}},s.mapElems((function(e,t){var r=n.map(u.equals(t)),a=new i;return r.filter(u.identity).onValue((function(){return y(a.get())})),o.createElement(v,{result:e,ref:s.set(a),key:t,onClick:function(){return n.set(t)},className:s.cns(s.when(r,"selected"))})}),l)))}}}],[[13,1,2]]]);
//# sourceMappingURL=0.bundle.a2f226fef7a2e1ec53af.js.map