{"version":3,"sources":["webpack:///./assets/default_avatar.jpg","webpack:///./src/App.tsx","webpack:///./src/FaceitApi.ts","webpack:///./src/style.scss?75ba","webpack:///./src/style.scss"],"names":["console","log","Search","input","setInput","results$","useObservable","inputs$","pipe","pluckFirst","filter","length","debounceTime","switchMap","searchPlayer","map","response","items","results","useObservableState","className","type","value","onChange","e","currentTarget","result","SearchResultPlayer","key","player_id","Link","to","src","avatar","nickname","PlayerDetails","playerId","player$","$inputs","getPlayer","showJson","setShowJson","player","undefined","country","href","steam_id_64","games","csgo","faceit_elo","onClick","DebugValue","name","MatchList","matches$","getMatchHistory","_","matches","match","Match","match_id","matchId","match$","getMatch","version","MatchV2","MatchV1","time","isInTeam","team","roster","find","p","TeamName","open","setOpen","winnerTeam","teams","winner","winOrLoss","faction1","faction2","started_at","DateTime","fromSeconds","toRelative","MatchV2Details","playerList","JSON","stringify","render","HashRouter","Route","path","document","getElementById","callApi","method","params","url","searchParams","URLSearchParams","Object","entries","forEach","append","toString","mkQueryString","Observable","observer","abortController","AbortController","requestDone","fetch","headers","signal","then","next","complete","err","error","abort","limit","game","flatMap","from","json","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"0.bundle.c76877ff1921f3a82f02.js","sourcesContent":["export default __webpack_public_path__ + \"7a2dcae25524daba0f2f1485ce5c07e3.jpg\";","import React, {useState} from \"react\"\nimport {render} from \"react-dom\"\nimport {pluckFirst, useObservable, useObservableState} from \"observable-hooks\"\nimport {debounceTime, filter, map, switchMap} from \"rxjs/operators\"\nimport {\n  getMatch,\n  getMatchHistory,\n  getPlayer,\n  GetSearchPlayersResponse$Player,\n  searchPlayer,\n  GetSearchPlayersResponse,\n  GetMatchResponse$MatchV2, GetMatchHistoryResponse$Faction, GetMatchResponse$MatchV2$Faction, GetMatchResponse$MatchV1\n} from \"./FaceitApi.ts\"\nimport {DateTime} from \"luxon\"\n\nimport DefaultAvatar from \"../assets/default_avatar.jpg\"\n\nconsole.log(require(\"../assets/default_avatar.jpg\"))\n\nimport \"./style.scss\"\nimport {HashRouter, Link, Route, useParams} from \"react-router-dom\"\n\nfunction App() {\n  const [player, setPlayer] = useState<GetSearchPlayersResponse$Player | undefined>(undefined)\n  return (\n    <HashRouter>\n      <Search />\n      <div className=\"main-content\">\n        <Route path=\"/player/:playerId\">\n          <PlayerDetails />\n        </Route>\n      </div>\n    </HashRouter>\n  )\n}\n\nfunction Search() {\n  const [input, setInput] = useState('asd')\n\n  const results$ = useObservable(\n    inputs$ => inputs$.pipe(\n      pluckFirst,\n      filter(input => input.length >= 3),\n      debounceTime(300),\n      switchMap(input => searchPlayer(input)),\n      map((response: GetSearchPlayersResponse) => response.items)\n    ),\n    [input]\n  )\n  const results = useObservableState(results$, [])\n\n  return (\n    <div className=\"search-form\">\n      <input type=\"text\" value={input} onChange={e => setInput(e.currentTarget.value)} />\n\n      <ul className=\"search-results\">\n        {results.map(result => {\n          return <SearchResultPlayer result={result} key={result.player_id} />\n        })}\n      </ul>\n    </div>\n  )\n}\n\nfunction SearchResultPlayer({ result }: { result: GetSearchPlayersResponse$Player }) {\n  return <li className=\"search-result\">\n    <Link to={`/player/${result.player_id}`}>\n      <img className=\"avatar\" src={result.avatar === \"\" ? DefaultAvatar : result.avatar} />\n      <span className=\"nickname\">{result.nickname}</span>\n    </Link>\n  </li>\n\n}\n\nfunction PlayerDetails() {\n  const { playerId } = useParams<{ playerId: string }>()\n\n  const player$ = useObservable($inputs => $inputs.pipe(\n    pluckFirst,\n    switchMap(playerId => getPlayer(playerId))\n    ),\n    [playerId]\n  )\n\n  const [showJson, setShowJson] = useState(false)\n\n  const player = useObservableState(player$, undefined)\n\n  if (!player || playerId !== player.player_id) {\n    return <p>Loading...</p>\n  }\n  return (\n    <>\n      <div className=\"player\">\n        <img className=\"player-avatar\" src={player.avatar === \"\" ? DefaultAvatar : player.avatar} />\n        <div className=\"player-info\">\n          <h2>{player.nickname} ({player.country})</h2>\n          <ul>\n            <li><a href={`https://www.faceit.com/en/players/${player.nickname}`}>FACEIT profile</a></li>\n            {player.steam_id_64 && <li><a href={`https://steamcommunity.com/profiles/${player.steam_id_64}`}>Steam profile</a></li>}\n            {player.games?.csgo?.faceit_elo && <li>CS:GO elo {player.games.csgo.faceit_elo}</li>}\n          </ul>\n        </div>\n      </div>\n\n      <div>\n        <button onClick={() => setShowJson(!showJson)}>Show JSON</button>\n        {showJson && <DebugValue name=\"player\" value={player} />}\n      </div>\n\n      <MatchList playerId={player.player_id} />\n    </>\n  )\n}\n\nfunction MatchList({ playerId }: { playerId: string }) {\n  const matches$ = useObservable(inputs$ => inputs$.pipe(\n    pluckFirst,\n    switchMap(playerId => getMatchHistory(playerId, \"csgo\")),\n    map(_ => _.items)\n  ), [playerId])\n  const matches = useObservableState(matches$, [])\n\n  return (\n\n    <div className=\"match-history\">\n      <h2>Match history</h2>\n      {matches.map(match => {\n        return <Match key={match.match_id} playerId={playerId} matchId={match.match_id} />\n      })}\n    </div>\n  )\n}\n\nfunction Match({ playerId, matchId }: { playerId: string, matchId: string }) {\n  const match$ = useObservable(inputs$ => inputs$.pipe(\n    pluckFirst,\n    switchMap(matchId => getMatch(matchId))\n  ), [matchId])\n\n  const match = useObservableState(match$, undefined)\n\n  if (!match || matchId !== match.match_id) {\n    return <p>Loading...</p>\n  }\n\n  return (\n    <div className={\"match\"}>\n      {match.version === 2 && <MatchV2 match={match} playerId={playerId} />}\n      {match.version === 1 && <MatchV1 match={match} playerId={playerId} />}\n\n    </div>\n  )\n}\nfunction MatchV1({ match, playerId }: { match: GetMatchResponse$MatchV1, playerId: string}) {\n  return <p>TODO</p>\n}\n\nfunction MatchV2({ match, playerId }: { match: GetMatchResponse$MatchV2, playerId: string }) {\n  const isInTeam = (team: GetMatchResponse$MatchV2$Faction, playerId: string) =>\n    team.roster.find(p => p.player_id === playerId)\n  const TeamName = ({ team }: { team: GetMatchResponse$MatchV2$Faction}) =>\n    <span className={isInTeam(team, playerId) ? \"home-team\" : \"enemy-team\"}>{team.name}</span>\n\n  const [open, setOpen] = useState(false)\n\n  const winnerTeam = match.teams[match.results.winner]\n  const isWinner = isInTeam(winnerTeam, playerId)\n  const winOrLoss = isWinner\n    ? <span className=\"win\">WIN</span>\n    : <span className=\"loss\">LOSS</span>\n\n  return (\n    <div>\n      <div className=\"match-header\" onClick={() => setOpen(!open)}>\n        <div className=\"result\">\n          <p>{winOrLoss}</p>\n        </div>\n        <div className=\"match-name\">\n          <p>\n            <TeamName team={match.teams.faction1}/> vs <TeamName team={match.teams.faction2}/>\n          </p>\n        </div>\n        <div className=\"timestamp\">\n          <p>{formatTime(match.started_at)}</p>\n        </div>\n        <div className=\"toggle\">\n          <p>{open ? <i className=\"fas fa-chevron-down\" /> : <i className=\"fas fa-chevron-right\" />}</p>\n        </div>\n      </div>\n      {open && <MatchV2Details match={match} />}\n    </div>\n  )\n}\n\nfunction MatchV2Details({ match }: { match: GetMatchResponse$MatchV2 }) {\n  const playerList = (team: GetMatchResponse$MatchV2$Faction) =>\n    <div className=\"team\">\n      <img className=\"avatar\" src={team.avatar === \"\" ? DefaultAvatar : team.avatar} />\n      <div className=\"players\">\n        <h2>{team.name}</h2>\n        <ul>\n          {team.roster.map(p =>\n            <li key={p.player_id}>{p.nickname}</li>\n          )}\n        </ul>\n      </div>\n    </div>\n\n  const [showJson, setShowJson] = useState(false)\n\n  return (\n    <div className=\"match-details\">\n      <div className=\"teams\">\n        {playerList(match.teams.faction1)}\n        {playerList(match.teams.faction2)}\n      </div>\n\n      <button onClick={() => setShowJson(!showJson)}>Show JSON</button>\n      {showJson && <DebugValue name=\"match\" value={match} />}\n    </div>\n  )\n}\n\nfunction formatTime(time: number): string {\n  return DateTime.fromSeconds(time).toRelative()!\n}\n\nfunction DebugValue({ name, value }: { name: string, value: any }) {\n  return (\n    <pre>{name} === {JSON.stringify(value, null, 2)}</pre>\n  )\n}\n\nrender(<App />, document.getElementById(\"app\"))\n","import {from, observable, Observable} from \"rxjs\"\nimport {flatMap} from \"rxjs/operators\";\n\nconst API_KEY = \"82592226-3fb7-41cf-941c-7098de7d84c7\"\n\ntype QueryParams = { [key: string]: string }\n\nexport interface GetSearchPlayersResponse {\n  items: Array<GetSearchPlayersResponse$Player>\n  start: number\n  end: number\n}\n\nexport interface GetSearchPlayersResponse$Player {\n  player_id: string\n  nickname: string\n  status: string\n  games: Array<{\n    name: string\n    skill_level: string\n  }>\n  country: string\n  verified: boolean\n  avatar: string\n}\n\nexport function searchPlayer(nickname: string): Observable<GetSearchPlayersResponse> {\n  return callApi(\"GET\", \"/search/players\", { nickname, limit: \"10\", game: \"csgo\" })\n    .pipe(flatMap(response => from(response.json())))\n}\n\nexport interface GetPlayerResponse {\n  player_id: string\n  nickname: string\n  avatar: string\n  country: string\n  cover_image: string\n  cover_featured_image: string\n  infractions: {\n    last_infraction_date: string\n    afk: number\n    leaver: number\n    qm_not_checkeding: number\n    qm_not_voted: number\n  }\n  platforms: {\n    steam: string\n  }\n  games: {\n    [key: string]: GetPlayerResponse$Game\n  }\n  settings: {\n    language: string\n  }\n  bans: unknown[]\n  new_steam_id: string\n  steam_id_64: string\n  steam_nickname: string\n  membership_type: string\n  memberships: string[]\n  faceit_url: string\n}\n\nexport interface GetPlayerResponse$Game {\n  game_profile_id: string\n  region: string\n  regions: {\n    [region: string]: {\n      selected_ladder_id: string\n    }\n  }\n  skill_level_label: string\n  game_player_id: string\n  skill_level: number\n  faceit_elo: number\n  game_player_name: string\n}\n\nexport function getPlayer(playerId: string): Observable<GetPlayerResponse> {\n  return callApi(\"GET\", `/players/${playerId}`)\n    .pipe(flatMap(response => from(response.json())))\n}\n\nexport interface GetMatchHistoryResponse {\n  items: Array<{\n    match_id: string\n    game_id: string\n    region: string\n    match_type: string\n    game_mode: string\n    max_players: number\n    teams_size: number\n    teams: {\n      faction1: GetMatchHistoryResponse$Faction\n      faction2: GetMatchHistoryResponse$Faction\n    }\n    playing_players: string[]\n    competition_id: string\n    competition_name: string\n    organizer_id: string\n    status: string\n    started_at: number\n    finished_at: number\n    results: {\n      winner: 'faction1' | 'faction2'\n      score: {\n        faction1: number\n        faction2: number\n      }\n    }\n    faceit_url: string\n  }>\n  start: number\n  end: number\n  from: number\n  to: number\n}\n\nexport interface GetMatchHistoryResponse$Faction {\n  team_id: string\n  nickname: string\n  avatar: string\n  type: string\n  players: Array<{\n    player_id: string\n    nickname: string\n    avatar: string\n    skill_level: number\n    game_player_id: string\n    game_player_name: string\n    faceit_url: string\n  }>\n}\n\nexport function getMatchHistory(playerId: string, game: string): Observable<GetMatchHistoryResponse> {\n  return callApi(\"GET\", `/players/${playerId}/history`, { game })\n    .pipe(flatMap(response => from(response.json())))\n}\n\ntype GetMatchResponse = GetMatchResponse$MatchV1 | GetMatchResponse$MatchV2\n\nexport interface GetMatchResponse$MatchV1 {\n  version: 1\n  match_id: string\n}\n\nexport interface GetMatchResponse$MatchV2 {\n  version: 2\n  match_id: string\n  game: string\n  region: string\n  competition_id: string\n  competition_type: string\n  competition_name: string\n  organizer_id: string\n  teams: {\n    faction1: GetMatchResponse$MatchV2$Faction\n    faction2: GetMatchResponse$MatchV2$Faction\n  }\n  voting: {\n    voted_entity_types: string[]\n    [entity_type: string]: string[] | {\n      entities: Array<{\n        class_name: string\n        game_map_id: string\n        guid: string\n        image_ld: string\n        image_sm: string\n        name: string\n      }>\n      pick: string[]\n    }\n  }\n  calculate_elo: boolean\n  configured_at: number\n  started_at: number\n  finished_at: number\n  demo_url: string[]\n  chat_room_id: string\n  best_of: number\n  results: {\n    winner: \"faction1\" | \"faction2\"\n    score: {\n      faction1: number\n      faction2: number\n    }\n  }\n  status: string\n  faceit_url: string\n}\n\nexport interface GetMatchResponse$MatchV2$Faction {\n  faction_id: string\n  leader: string\n  avatar: string\n  roster: Array<GetMatchResponse$MatchV2$Faction$Player>\n  substituted: boolean\n  name: string\n  type: string\n}\n\nexport interface GetMatchResponse$MatchV2$Faction$Player {\n  player_id: string\n  nickname: string\n  avatar: string\n  membership: string\n  game_player_id: string\n  game_player_name: string\n  game_skill_level: number\n  anticheat_required: boolean\n}\n\nexport function getMatch(matchId: string): Observable<GetMatchResponse> {\n  return callApi(\"GET\", `/matches/${matchId}`)\n    .pipe(flatMap(response => from(response.json())))\n}\n\nexport function getMatchStats(matchId: string): Observable<any> {\n  return callApi(\"GET\", `/matches/${matchId}/stats`)\n    .pipe(flatMap(response => from(response.json())))\n}\n\nfunction callApi(method: string, path: string, params?: QueryParams): Observable<Response> {\n  const url = params\n    ? `https://open.faceit.com/data/v4${path}?${mkQueryString(params)}`\n    : `https://open.faceit.com/data/v4${path}`\n  return new Observable<Response>(observer => {\n    const abortController = new AbortController()\n    let requestDone = false\n\n    fetch(url, {\n      method,\n      headers: { \"Authorization\": `Bearer ${API_KEY}` },\n      signal: abortController.signal\n    })\n    .then(response => {\n      requestDone = true\n      observer.next(response)\n      observer.complete()\n    })\n    .catch(err => {\n      observer.error(err)\n      observer.complete()\n    })\n\n    return () => {\n      if (!requestDone) {\n        console.log(`Cancelling request in progress: ${path}`)\n        abortController.abort()\n      }\n    }\n  })\n}\n\nfunction mkQueryString(params: QueryParams): string {\n  const searchParams = new URLSearchParams()\n  Object.entries(params).forEach(([key, value]) =>\n    searchParams.append(key, value))\n  return searchParams.toString()\n}\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./style.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);\"]);\n// Module\nexports.push([module.id, \"body{font-family:'Source Sans Pro', sans-serif;color:#333;background-color:#f7f7f7}.search-form{position:fixed;top:0;left:0;overflow:none;height:100%;width:300px;display:flex;flex-direction:column}.search-form input{min-height:12px;height:12px;padding:10px}.search-form .search-results{flex-grow:1;overflow-y:scroll}.search-form .search-results .search-result a{display:flex;height:32px}.search-form .search-results .search-result a .nickname{flex-grow:1;vertical-align:middle;line-height:32px}.search-form .search-results .search-result{border-bottom:1px dashed #ddd;box-sizing:border-box}.search-form .search-results .search-result .avatar{width:32px;height:32px;margin-right:10px}.search-form ul{margin:0;padding:0}.search-form li{list-style-type:none}.search-form li.selected{background-color:#eee}.main-content{margin-left:300px}.player{display:flex;flex-direction:row}.player .player-avatar{width:170px;height:170px}.player .player-info{flex-grow:1;padding-left:20px}.match{margin:10px 0;padding:5px 0}.match .match-header{display:flex;flex-direction:row}.match .match-header .result{width:100px}.match .match-header .match-name{flex-grow:1;padding-left:20px}.match .match-header .timestamp{width:150px;padding:0 20px}.match .match-header .toggle{width:16px;padding:0 20px}.match .match-details .teams{display:flex;flex-direction:row}.match .match-details .teams .team{flex-grow:1;display:flex;flex-direction:row}.match .match-details .teams .team .avatar{width:240px;height:240px}.match .match-details .teams .team .players{flex-grow:1;padding-left:20px}.match{border:1px solid #eee;background:white;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2)}.match .match-header .result{text-align:center}.match .match-header .result .win{color:green}.match .match-header .result .loss{color:red}.match .match-header .match-name{border-left:1px solid lightgray;border-right:1px solid lightgray}.match .match-header .match-name .home-team{text-decoration:underline}.match .match-header .timestamp{text-align:center}.match .match-header .toggle{text-align:center;border-left:1px solid lightgray}.match .match-details{padding:20px;border-top:1px solid lightgray}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}