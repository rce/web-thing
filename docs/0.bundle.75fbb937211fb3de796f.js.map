{"version":3,"sources":["webpack:///./src/Faceit.js","webpack:///./src/Common.jsx","webpack:///./src/Util.js","webpack:///./src/App.jsx","webpack:///./src/style.scss?f8f3","webpack:///./src/style.scss","webpack:///./src/PlayerDetails.jsx","webpack:///./src/MatchList.jsx","webpack:///./src/Search.jsx"],"names":["Kefir","require","R","DateTime","FaceitClient","apiKey","_classCallCheck","this","base","authHeaders","Authorization","concat","nickname","callApi","limit","game","map","prop","playerId","matchId","m","mergeLeft","started_at","fromSeconds","method","path","params","_this","url","mkQueryString","stream","emitter","controller","AbortController","signal","requestDone","fetch","headers","then","_","json","result","emit","end","catch","err","error","console","log","abort","paramObject","searchParams","URLSearchParams","Object","entries","forEach","_ref","_ref2","_slicedToArray","key","value","append","String","toString","module","exports","React","Spinner","createElement","isAwaiting","derivative","merge","render","Atom","U","PlayerDetails","Search","selectedPlayer","Fragment","selection","className","ifElse","document","getElementById","content","__webpack_require__","i","options","hmr","transform","insertInto","undefined","locals","push","MatchList","player","flatMapLatest","getPlayer","toProperty","loadingPlayer","view","src","when","Match","match","getMatch","team1","team2","winOrLoss","combine","hasPlayer","winner","TeamName","mkTeamName","isNil","team","formatTime","teams","results","roster","includes","date","toRelative","_ref3","cns","isHomeTeam","matches","getHistory","mapElemsWithIds","id","SearchResultPlayer","forwardRef","ref","props","_objectWithoutProperties","_extends","scrollVisible","element","scrollIntoView","block","lengthAtLeast","n","compose","lte","length","nameInput","selectedIndex","searchTerm","filter","debounce","skipDuplicates","searchResults","name","searchPlayer","loadingResults","onValue","set","idx","hasResults","complement","isEmpty","upsAndDowns","bus","e","mod","dec","inc","min","max","func","modify","inputRef","focus","type","onKeyDown","preventDefault","persist","onChange","getProps","onMouseDown","get","mapElems","x","selected","equals","identity","onClick"],"mappings":"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","file":"0.bundle.75fbb937211fb3de796f.js","sourcesContent":["const Kefir = require(\"kefir\")\nconst R = require(\"ramda\")\nconst {DateTime} = require(\"luxon\")\n\nconst API_KEY = \"82592226-3fb7-41cf-941c-7098de7d84c7\"\n\nclass FaceitClient {\n  constructor(apiKey) {\n    this.base = \"https://open.faceit.com/data/v4\"\n    this.apiKey = apiKey\n    this.authHeaders = {\"Authorization\": `Bearer ${this.apiKey}`}\n  }\n\n  searchPlayer(nickname) {\n    return this.callApi(\"GET\", \"/search/players\", {nickname, limit: \"1000\", game: \"csgo\"})\n      .map(R.prop(\"items\"))\n  }\n\n  getPlayer(playerId) {\n    return this.callApi(\"GET\", `/players/${playerId}`)\n  }\n\n  getHistory(playerId, game) {\n    return this.callApi(\"GET\", `/players/${playerId}/history`, {game})\n      .map(R.prop(\"items\"))\n  }\n\n  getMatch(matchId) {\n    return this.callApi(\"GET\", `/matches/${matchId}`)\n      .map(m => R.mergeLeft({\n        started_at: DateTime.fromSeconds(m.started_at),\n      }, m))\n  }\n\n  getMatchStats(matchId) {\n    return this.callApi(\"GET\", `/matches/${matchId}/stats`)\n  }\n\n  callApi(method, path, params) {\n    const url = `${this.base}${path}?${this.mkQueryString(params)}`\n    return Kefir.stream(emitter => {\n      const controller = new AbortController()\n      const signal = controller.signal\n      let requestDone = false\n\n      fetch(url, {method, headers: this.authHeaders, signal})\n        .then(_ => _.json())\n        .then(result => {\n          requestDone = true\n          emitter.emit(result)\n          emitter.end()\n        })\n        .catch(err => {\n          emitter.error(err)\n          emitter.end()\n        })\n\n      return () => {\n        if (!requestDone) {\n          console.log(`Cancelling request in progress: ${path}`)\n          controller.abort()\n        }\n      }\n    })\n  }\n\n  mkQueryString(paramObject) {\n    if (!paramObject) return \"\"\n\n    const searchParams = new URLSearchParams()\n    Object.entries(paramObject).forEach(([key, value]) =>\n      searchParams.append(key, String(value)))\n    return searchParams.toString()\n  }\n}\n\nmodule.exports = new FaceitClient(API_KEY)\n","const React = require(\"karet\")\n\nconst Spinner = () => <p>Loading...</p>\n\nmodule.exports = {Spinner}\n","const Kefir = require(\"kefir\")\n\nconst isAwaiting = (stream, derivative) =>\n  Kefir.merge([\n    stream.map(() => true),\n    derivative.map(() => false),\n  ])\n\nmodule.exports = {isAwaiting}\n","const React = require(\"karet\")\nconst {render} = require(\"react-dom\")\nconst {Atom} = require(\"kefir.atom\")\nconst U = require(\"karet.util\")\n\nrequire(\"./style.scss\")\n\nconst PlayerDetails = require(\"./PlayerDetails.jsx\")\nconst {Search} = require(\"./Search.jsx\")\n\nconst App = () => {\n  const selectedPlayer = new Atom(\"\")\n\n  return (\n    <React.Fragment>\n      <Search selection={selectedPlayer} />\n      <div className=\"main-content\">\n        {U.ifElse(selectedPlayer,\n          <PlayerDetails selection={selectedPlayer} />,\n          <p>Select a player from search results</p>)}\n      </div>\n    </React.Fragment>\n  )\n}\n\nrender(<App />, document.getElementById(\"app\"))\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);\", \"\"]);\n\n// Module\nexports.push([module.id, \"body {\\n  font-family: 'Source Sans Pro', sans-serif;\\n  color: #333;\\n  background-color: #f7f7f7; }\\n\\n.search-form {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  overflow: none;\\n  height: 100%;\\n  width: 200px;\\n  display: flex;\\n  flex-direction: column; }\\n  .search-form input {\\n    min-height: 12px;\\n    height: 12px;\\n    padding: 10px; }\\n  .search-form .search-results {\\n    flex-grow: 1;\\n    overflow-y: scroll; }\\n  .search-form .search-results .search-result {\\n    display: flex;\\n    height: 32px; }\\n    .search-form .search-results .search-result .nickname {\\n      flex-grow: 1;\\n      vertical-align: middle;\\n      line-height: 32px; }\\n  .search-form .search-results .search-result {\\n    border-bottom: 1px dashed #ddd;\\n    box-sizing: border-box; }\\n    .search-form .search-results .search-result .avatar {\\n      width: 32px;\\n      height: 32px;\\n      margin-right: 10px; }\\n  .search-form ul {\\n    margin: 0;\\n    padding: 0; }\\n  .search-form li {\\n    list-style-type: none; }\\n    .search-form li.selected {\\n      background-color: #eee; }\\n\\n.match-history .match {\\n  border: 1px solid #eee;\\n  background: white;\\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\\n  margin: 10px;\\n  padding: 10px; }\\n  .match-history .match .home-team {\\n    font-weight: bold;\\n    font-style: italic; }\\n\\n.match-history .win {\\n  color: green; }\\n\\n.match-history .loss {\\n  color: red; }\\n\\n.main-content {\\n  margin-left: 200px; }\\n\\n.player-details .player-avatar {\\n  width: 170px;\\n  height: 170px; }\\n\", \"\"]);\n\n","const React = require(\"karet\")\nconst R = require(\"ramda\")\nconst U = require(\"karet.util\")\n\nconst FaceitClient = require(\"./Faceit.js\")\nconst MatchList = require(\"./MatchList.jsx\")\nconst {Spinner} = require(\"./Common.jsx\")\nconst {isAwaiting} = require(\"./Util.js\")\n\nconst PlayerDetails = ({selection}) => {\n  const player = selection\n    .flatMapLatest(playerId => FaceitClient.getPlayer(playerId))\n    .toProperty()\n  const loadingPlayer = isAwaiting(selection, player)\n\n  return <div className=\"player-details\">\n    {U.ifElse(loadingPlayer,\n      <Spinner />,\n      <div>\n        <h2>{U.view(\"nickname\", player)} ({U.view(\"country\", player)})</h2>\n        <img className=\"player-avatar\" src={U.view(\"avatar\", player)} />\n        <table>\n          <tbody>\n            <tr><td>Player ID</td><td>{U.view(\"player_id\", player)}</td></tr>\n            <tr><td>Country</td><td>{U.view(\"country\", player)}</td></tr>\n            {U.when(player.map(R.path([\"platforms\", \"steam\"])),\n              <tr><td>Steam ID</td><td>{U.view([\"platforms\", \"steam\"], player)}</td></tr>)}\n            {U.when(player.map(R.path([\"games\", \"csgo\", \"faceit_elo\"])),\n              <tr><td>CSGO elo</td><td>{U.view([\"games\", \"csgo\", \"faceit_elo\"], player)}</td></tr>)}\n          </tbody>\n        </table>\n\n        <MatchList playerId={U.view(\"player_id\", player)} />\n      </div>,\n    )}\n  </div>\n}\n\nmodule.exports = PlayerDetails\n","const React = require(\"karet\")\nconst Kefir = require(\"kefir\")\nconst U = require(\"karet.util\")\nconst R = require(\"ramda\")\n\nconst FaceitClient = require(\"./Faceit.js\")\nconst {Spinner} = require(\"./Common.jsx\")\n\nconst MatchList = ({playerId}) => {\n  const matches = playerId\n    .flatMapLatest(playerId => FaceitClient.getHistory(playerId, \"csgo\"))\n    .toProperty(() => [])\n\n  return <div className=\"match-history\">\n    <h2>Match history</h2>\n    {U.mapElemsWithIds(\"match_id\", (match, id) =>\n      <Match key={id} playerId={playerId} matchId={U.view(\"match_id\", match)} />, matches)}\n  </div>\n}\n\nconst Match = ({playerId, matchId}) => {\n  const match = matchId.flatMapLatest(matchId => FaceitClient.getMatch(matchId)).toProperty()\n\n  const team1 = U.view([\"teams\", \"faction1\"], match)\n  const team2 = U.view([\"teams\", \"faction2\"], match)\n\n  const winOrLoss = U.when(match,\n    Kefir.combine([match], [playerId], (match, playerId) => {\n      return hasPlayer(playerId, winner(match))\n        ? <span className=\"win\">WIN</span>\n        : <span className=\"loss\">LOSS</span>\n    }))\n\n  const TeamName = mkTeamName(playerId)\n  return (\n    <div className=\"match\">\n      {U.ifElse(\n        R.isNil(match),\n        <Spinner />,\n        <div>\n          <p>\n            <TeamName team={team1} /> vs <TeamName team={team2} /> ({U.view(\"competition_name\", match)})\n          </p>\n          <p>{winOrLoss}</p>\n          <p>{U.view([\"started_at\", formatTime], match)}</p>\n        </div>)}\n    </div>\n  )\n}\n\nconst winner = match => match.teams[match.results.winner]\n\nconst hasPlayer = (playerId, team) =>\n  team.roster.map(R.prop(\"player_id\")).includes(playerId)\n\nconst formatTime = date => date.toRelative()\n\nconst mkTeamName = playerId => ({team, className}) => {\n  const isHomeTeam = team => Kefir.combine([team], [playerId],\n    (team, playerId) => team.roster.map(R.prop(\"player_id\")).includes(playerId))\n  return <span className={U.cns(className, U.ifElse(isHomeTeam(team), \"home-team\", \"enemy-team\"))}>{U.view(\"name\", team)}</span>\n}\n\nmodule.exports = MatchList\n","const React = require(\"karet\")\nconst {Atom} = require(\"kefir.atom\")\nconst R = require(\"ramda\")\nconst U = require(\"karet.util\")\nconst Kefir = require(\"kefir\")\n\nconst FaceitClient = require(\"./Faceit.js\")\nconst {Spinner} = require(\"./Common.jsx\")\nconst {isAwaiting} = require(\"./Util.js\")\n\nconst Search = ({selection}) => {\n  const nameInput = new Atom(\"somnium\")\n  const selectedIndex = new Atom(0)\n\n  const searchTerm = nameInput.filter(lengthAtLeast(3)).debounce(250).skipDuplicates()\n  const searchResults = searchTerm\n    .flatMapLatest(name => FaceitClient.searchPlayer(name))\n    .toProperty(() => [])\n  const loadingResults = isAwaiting(searchTerm, searchResults)\n\n  // Select first result automatically\n  searchResults.onValue(() => selectedIndex.set(0))\n\n  Kefir.combine(\n    [selectedIndex, searchResults],\n    (idx, results) => R.path([idx, \"player_id\"], results)\n  ).onValue(playerId => selection.set(playerId))\n\n  const hasResults = searchResults.map(R.complement(R.isEmpty))\n\n  const upsAndDowns = U.bus()\n  const onKeyDown = e => {\n    if ([\"ArrowDown\", \"ArrowUp\"].includes(e.key)) {\n      e.preventDefault()\n      e.persist()\n      upsAndDowns.push(e)\n    }\n  }\n  Kefir.combine([upsAndDowns, searchResults], (e, results) => {\n    const mod = e.key === \"ArrowUp\" ? R.dec : R.inc\n    return idx => R.min(R.max(0, mod(idx)), results.length - 1)\n  }).onValue(func => selectedIndex.modify(func))\n\n  // Reference to input to keep focus on it\n  const inputRef = new Atom()\n  inputRef.onValue(ref => ref.focus())\n\n  return <div className=\"search-form\">\n    <input\n      ref={U.set(inputRef)}\n      type=\"text\"\n      value={nameInput}\n      onKeyDown={onKeyDown}\n      onChange={U.getProps({value: nameInput})} />\n\n    {U.when(loadingResults, <Spinner />)}\n\n    {U.ifElse(hasResults,\n      <ul className=\"search-results\"\n        onMouseDown={e => {\n          e.preventDefault()\n          inputRef.get().focus()\n        }}>\n        {U.mapElems((x, idx) => {\n          const selected = selectedIndex.map(R.equals(idx))\n          const ref = new Atom()\n          selected.filter(R.identity).onValue(() => scrollVisible(ref.get()))\n          return (\n            <SearchResultPlayer result={x}\n              ref={U.set(ref)}\n              key={idx}\n              onClick={() => selectedIndex.set(idx)}\n              className={U.cns(U.when(selected, \"selected\"))} />\n          )\n        }, searchResults)}\n      </ul>,\n      <p>No results</p>)}\n  </div>\n}\n\nconst SearchResultPlayer = React.forwardRef(({result, className, ...props}, ref) => (\n  <li {...props} ref={ref} className={U.cns(\"search-result\", className)}>\n    <img className=\"avatar\" src={U.view(\"avatar\", result)} />\n    <span className=\"nickname\">{U.view(\"nickname\", result)}</span>\n  </li>\n))\n\nconst scrollVisible = element =>\n  element && element.scrollIntoView({ block: \"nearest\" })\n\nconst lengthAtLeast = n => R.compose(R.lte(n), R.length)\n\nmodule.exports = {Search}\n"],"sourceRoot":""}